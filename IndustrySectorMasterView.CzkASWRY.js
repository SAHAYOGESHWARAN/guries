import{u as R,r,j as e}from"./index.Cgn8UqAd.js";import{D as $}from"./download.io5_EtDe.js";import{P as H,X as S,a as Q,T as q}from"./x.BiCs_uOD.js";import{S as B}from"./search.CVVJ0o-x.js";const W=()=>{const{data:l,create:C,update:k,remove:I,loading:A}=R("industry-sectors"),[o,j]=r.useState(""),[i,D]=r.useState(""),[d,M]=r.useState(""),[u,L]=r.useState(""),[z,v]=r.useState(!1),[x,g]=r.useState(null),[s,n]=r.useState({industry:"",sector:"",application:"",country:"",description:"",status:"active"}),[f,p]=r.useState(""),[V,N]=r.useState(""),F=r.useMemo(()=>[...new Set(l.map(t=>t.industry))].sort(),[l]),P=r.useMemo(()=>[...new Set(l.map(t=>t.country))].sort(),[l]);r.useMemo(()=>f?[...new Set(l.filter(t=>t.industry===f).map(t=>t.sector))].sort():[],[l,f]);const h=r.useMemo(()=>l.filter(t=>{const m=t.industry.toLowerCase().includes(o.toLowerCase())||t.sector.toLowerCase().includes(o.toLowerCase())||t.application.toLowerCase().includes(o.toLowerCase()),b=!i||t.industry===i,c=!d||t.country===d,a=!u||t.status===u;return m&&b&&c&&a}),[l,o,i,d,u]),w=t=>{t?(g(t),n(t),p(t.industry),N(t.sector)):(g(null),n({industry:"",sector:"",application:"",country:"",description:"",status:"active"}),p(""),N("")),v(!0)},y=()=>{v(!1),g(null),n({industry:"",sector:"",application:"",country:"",description:"",status:"active"})},E=async()=>{if(!s.industry||!s.sector||!s.application||!s.country){alert("Please fill in all required fields");return}try{x?await k(x.id,s):await C(s),y()}catch{alert("Failed to save. Please try again.")}},O=async t=>{if(window.confirm("Are you sure you want to delete this industry/sector?"))try{await I(t)}catch{alert("Failed to delete. Please try again.")}},T=()=>{const t=[["Industry","Sector","Application","Country","Description","Status"],...h.map(a=>[a.industry,a.sector,a.application,a.country,a.description||"",a.status])].map(a=>a.map(U=>`"${U}"`).join(",")).join(`
`),m=new Blob([t],{type:"text/csv"}),b=window.URL.createObjectURL(m),c=document.createElement("a");c.href=b,c.download=`industry-sector-${new Date().toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(b)};return e.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Industry / Sector Master"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage industry classifications, sectors, and business applications"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-white text-slate-700 border border-slate-300 px-4 py-2 rounded-lg font-medium text-sm hover:bg-slate-50 shadow-sm transition-colors",children:[e.jsx($,{size:16}),"Export"]}),e.jsxs("button",{onClick:()=>w(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium text-sm hover:bg-blue-700 shadow-sm transition-colors",children:[e.jsx(H,{size:16}),"Add Industry"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 space-y-4",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search industries, sectors, applications...",value:o,onChange:t=>j(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o&&e.jsx("button",{onClick:()=>j(""),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(S,{size:18,className:"text-slate-400"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("select",{value:i,onChange:t=>{D(t.target.value),p(t.target.value)},className:"px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"All Industries"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:d,onChange:t=>M(t.target.value),className:"px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"All Countries"}),P.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:u,onChange:t=>L(t.target.value),className:"px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Industry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Sector"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Application"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:A?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"Loading..."})}):h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No records found"})}):h.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:t.industry}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:t.sector}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:t.application}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:t.country}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 max-w-xs truncate",children:t.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:t.status==="active"?"✓ Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(t),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:e.jsx(Q,{size:16})}),e.jsx("button",{onClick:()=>O(t.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:e.jsx(q,{size:16})})]})})]},t.id))})]})}),e.jsxs("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 text-sm text-slate-600",children:["Showing ",h.length," of ",l.length," records"]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:x?"Edit Industry / Sector":"Add New Industry / Sector"}),e.jsx("button",{onClick:y,className:"p-1 hover:bg-slate-100 rounded transition-colors",children:e.jsx(S,{size:20,className:"text-slate-400"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Industry ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.industry||"",onChange:t=>{n({...s,industry:t.target.value}),p(t.target.value)},placeholder:"e.g., Technology",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Sector ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.sector||"",onChange:t=>n({...s,sector:t.target.value}),placeholder:"e.g., Software",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Application ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.application||"",onChange:t=>n({...s,application:t.target.value}),placeholder:"e.g., SaaS Platforms",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.country||"",onChange:t=>n({...s,country:t.target.value}),placeholder:"e.g., United States",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description||"",onChange:t=>n({...s,description:t.target.value}),placeholder:"Provide a detailed description of this industry/sector classification and its typical use cases...",rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),e.jsxs("select",{value:s.status||"active",onChange:t=>n({...s,status:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[e.jsx("strong",{children:"Hierarchy Structure:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Industry:"})," Top-level classification (e.g., Technology, Healthcare)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Sector:"})," Mid-level category within industry (e.g., Software, Cloud Services)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Application:"})," Specific use case or business function (e.g., SaaS Platforms)"]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-slate-50 border-t border-slate-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:x?"Update":"Create"})]})]})})]})};export{W as default};
