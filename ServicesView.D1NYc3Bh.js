import{u as m,r as n,j as e}from"./index.Cgn8UqAd.js";import{T as A}from"./Table.qlFSYBMu.js";const b=["All","Draft","In Progress","Published","Audit Pending","Needs Fix","QC Pending","QC Passed","Promoted"],M=()=>{const{data:c,create:p,remove:g,update:v}=m("servicePages"),{data:f}=m("services"),[x,j]=n.useState("All"),[a,w]=n.useState(""),[N,o]=n.useState("list"),[i,u]=n.useState(null),[t,l]=n.useState({page_title:"",url:"",page_type:"Service Page",service_name:"",sub_service_name:"",primary_keyword:"",status:"Draft"}),y=s=>s==="All"?c.length:c.filter(r=>r.status===s).length,k=c.filter(s=>{const r=s.page_title.toLowerCase().includes(a.toLowerCase())||s.url.toLowerCase().includes(a.toLowerCase())||(s.service_name||"").toLowerCase().includes(a.toLowerCase())||(s.sub_service_name||"").toLowerCase().includes(a.toLowerCase())||(s.primary_keyword||"").toLowerCase().includes(a.toLowerCase()),d=x==="All"||s.status===x;return r&&d}),S=async()=>{i?await v(i.id,t):await p({...t,seo_score:0,audit_score:0,last_audit:"Just created"}),o("list"),u(null),l({page_title:"",url:"",page_type:"Service Page",service_name:"",status:"Draft"})},_=s=>{u(s),l(s),o("form")},C=async s=>{confirm("Delete this service page?")&&await g(s)},h=s=>s>=90?"text-green-600 bg-green-50":s>=70?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",P=s=>{const r={Published:"bg-green-100 text-green-800","QC Passed":"bg-blue-100 text-blue-800","Needs Fix":"bg-red-100 text-red-800","Audit Pending":"bg-orange-100 text-orange-800","In Progress":"bg-yellow-100 text-yellow-800",Promoted:"bg-purple-100 text-purple-800",Draft:"bg-gray-100 text-gray-800","QC Pending":"bg-indigo-100 text-indigo-800"};return e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold whitespace-nowrap ${r[s]||"bg-gray-100"}`,children:s})},L=[{header:"Page Title",accessor:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.page_title}),e.jsx("span",{className:`text-[10px] uppercase font-semibold px-1.5 py-0.5 rounded border ${s.page_type==="Service Page"?"bg-blue-50 text-blue-600 border-blue-100":"bg-purple-50 text-purple-600 border-purple-100"}`,children:s.page_type})]})},{header:"URL",accessor:s=>e.jsx("a",{href:s.url,className:"text-xs font-mono text-blue-600 hover:underline block truncate max-w-[150px]",title:s.url,children:s.url})},{header:"Service → Sub-Service",accessor:s=>e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:s.service_name}),s.sub_service_name&&e.jsxs("span",{className:"text-slate-500 flex items-center text-xs mt-0.5",children:[e.jsx("span",{className:"mr-1",children:"→"})," ",s.sub_service_name]})]})},{header:"SEO Score",accessor:s=>e.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded text-center ${h(s.seo_score||0)}`,children:s.seo_score}),className:"text-center"},{header:"Audit Score",accessor:s=>e.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded text-center ${h(s.audit_score||0)}`,children:s.audit_score}),className:"text-center"},{header:"Primary Keyword",accessor:s=>e.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-1 rounded text-xs border border-slate-200 inline-block max-w-[120px] truncate",title:s.primary_keyword,children:s.primary_keyword})},{header:"Last Audit",accessor:"last_audit",className:"text-xs text-slate-500"},{header:"Status",accessor:s=>P(s.status)},{header:"Actions",accessor:s=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(s),className:"text-slate-400 hover:text-blue-600",title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>C(s.id),className:"text-slate-400 hover:text-red-600",title:"Delete",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}];return N==="form"?e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in w-full",children:[e.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o("list"),className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full hover:bg-slate-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:i?"Edit Service Page":"Add Service Page"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>o("list"),className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium shadow-sm hover:bg-blue-700 transition-colors",children:i?"Save Changes":"Create Page"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50",children:e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm uppercase mb-4",children:"Page Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Page Title"}),e.jsx("input",{type:"text",value:t.page_title,onChange:s=>l({...t,page_title:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. SEO Services"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"URL Path"}),e.jsx("input",{type:"text",value:t.url,onChange:s=>l({...t,url:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"/services/seo"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type"}),e.jsxs("select",{value:t.page_type,onChange:s=>l({...t,page_type:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{children:"Service Page"}),e.jsx("option",{children:"Sub-Service Page"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),e.jsx("select",{value:t.status,onChange:s=>l({...t,status:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:b.filter(s=>s!=="All").map(s=>e.jsx("option",{children:s},s))})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm uppercase mb-4",children:"Mapping & Strategy"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Parent Service"}),e.jsx("input",{type:"text",value:t.service_name,onChange:s=>l({...t,service_name:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",list:"services-list"}),e.jsx("datalist",{id:"services-list",children:f.map(s=>e.jsx("option",{value:s.service_name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sub-Service (Optional)"}),e.jsx("input",{type:"text",value:t.sub_service_name,onChange:s=>l({...t,sub_service_name:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Primary Keyword"}),e.jsx("input",{type:"text",value:t.primary_keyword,onChange:s=>l({...t,primary_keyword:s.target.value}),className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. enterprise seo audit"})]})]})]})})]}):e.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden bg-slate-50 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-start flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Service Page Repository"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Store, monitor, audit, and promote all Service and Sub-Service pages"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-slate-50 shadow-sm flex items-center transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),e.jsxs("button",{onClick:()=>{u(null),o("form")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-blue-700 shadow-sm transition-colors flex items-center",children:[e.jsx("span",{className:"mr-1 text-lg",children:"+"})," Add Service Page"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[e.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-slate-200 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",className:"block w-full p-2 pl-10 text-sm text-slate-900 border-none focus:ring-0 placeholder-slate-400",placeholder:"Search by Title, URL, Service, Sub-Service, keyword...",value:a,onChange:s=>w(s.target.value)})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-1 flex overflow-x-auto scrollbar-thin scrollbar-thumb-slate-200 flex-shrink-0",children:b.map(s=>{const r=y(s),d=x===s;return e.jsxs("button",{onClick:()=>j(s),className:`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-medium transition-all whitespace-nowrap flex items-center space-x-2 ${d?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-200":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx("span",{children:s}),e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${d?"bg-blue-200 text-blue-800":"bg-slate-100 text-slate-500"}`,children:r})]},s)})}),e.jsx("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col overflow-hidden",children:e.jsx(A,{columns:L,data:k,title:""})})]})]})};export{M as default};
