<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' font-weight='bold' fill='%233b82f6'>G</text></svg>" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description"
    content="Guires Marketing Control Center - Comprehensive marketing management platform for enterprise teams" />
  <meta name="keywords" content="marketing, control center, asset management, campaign management, enterprise" />
  <meta name="author" content="Guires Inc." />
  <meta property="og:title" content="Guires Marketing Control Center" />
  <meta property="og:description" content="Enterprise-grade marketing management platform" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#1e293b" />
  <title>Guires Marketing Control Center - Enterprise Marketing Platform</title>

  <!-- Preconnect to external domains for faster resource loading -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Optimized Google Fonts with font-display swap for faster rendering -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">

  <!-- Security headers are set via HTTP headers in backend/config/security.ts -->
  <!-- Do NOT set X-Frame-Options, X-Content-Type-Options, or X-XSS-Protection as meta tags -->
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <style>
    /* Enhanced loading screen with animations */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    }

    /* Fallback loading screen */
    #root {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      width: 100vw;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      color: #e2e8f0;
      position: relative;
    }

    .loading-container {
      text-align: center;
      z-index: 10;
      position: relative;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 3px solid rgba(59, 130, 246, 0.1);
      border-top-color: #3b82f6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 24px;
      position: relative;
    }

    .spinner::before {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      border: 3px solid rgba(139, 92, 246, 0.1);
      border-top-color: #8b5cf6;
      border-radius: 50%;
      animation: spin 1.5s linear infinite reverse;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .loading-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .loading-subtext {
      font-size: 14px;
      color: #94a3b8;
      font-weight: 400;
    }

    /* Background effects - pointer-events: none so they don't block clicks */
    #root::before {
      content: '';
      position: absolute;
      top: -10%;
      left: -10%;
      width: 50vw;
      height: 50vw;
      background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
      pointer-events: none;
    }

    #root::after {
      content: '';
      position: absolute;
      bottom: -10%;
      right: -10%;
      width: 50vw;
      height: 50vw;
      background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      animation: float 8s ease-in-out infinite reverse;
      pointer-events: none;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-20px);
      }
    }

    /* Performance optimizations */
    * {
      box-sizing: border-box;
    }

    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  </style>
</head>

<body>
  <div id="root">
    <div class="loading-container">
      <div class="spinner"></div>
      <div class="loading-text">Guires Marketing Control Center</div>
      <div class="loading-subtext" id="loading-subtext">Initializing your enterprise marketing platform...</div>
      <div id="loading-fallback" style="display:none; margin-top:20px;">
        <p style="color:#94a3b8;font-size:14px;margin-bottom:12px;">Taking longer than usual?</p>
        <a href="." style="color:#3b82f6;font-weight:600;text-decoration:none;" onclick="location.reload();return false;">Refresh page</a>
      </div>
    </div>
  </div>
  <div id="modal-root" class="relative z-[100]"></div>

  <!-- Main application entry point -->
  <script type="module" src="/src/main.tsx"></script>

  <!-- Loading timeout: show refresh hint if app does not load -->
  <script>
    setTimeout(function() {
      var root = document.getElementById('root');
      var fallback = document.getElementById('loading-fallback');
      if (root && fallback && root.querySelector('.loading-container') && !root.querySelector('[data-app-mounted]')) {
        document.getElementById('loading-subtext').style.display = 'none';
        fallback.style.display = 'block';
      }
    }, 12000);
  </script>

  <!-- Enhanced error handling and analytics -->
  <script>
    // Ignore errors from browser extensions (they inject scripts that can throw)
    function isExtensionError(filename, message) {
      if (!filename && !message) return false;
      const str = String(filename || '') + String(message || '');
      return /chrome-extension|moz-extension|webpage_content_reporter|grainy-gradients|content_reporter/i.test(str);
    }

    // Global error handler for better debugging
    window.addEventListener('error', (event) => {
      if (isExtensionError(event.filename, event.message)) {
        event.preventDefault();
        return;
      }
      var msg = event.error && event.error.message ? event.error.message : event.message;
      var stack = event.error && event.error.stack ? event.error.stack : '';
      console.error('Application Error: ' + msg, {
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno,
        stack: stack
      });
    });

    window.addEventListener('unhandledrejection', (event) => {
      var reason = event.reason;
      var reasonStr = typeof reason === 'string' ? reason : (reason && reason.message) || String(reason);
      if (/chrome-extension|moz-extension|webpage_content_reporter|grainy-gradients|402/i.test(reasonStr)) {
        event.preventDefault();
        return;
      }
      console.error('Unhandled Promise Rejection:', reasonStr, reason);
    });

    // Performance monitoring
    window.addEventListener('load', () => {
      const loadTime = performance.now();
      console.log(`Application loaded in ${loadTime.toFixed(2)}ms`);
    });
  </script>
</body>

</html>