import{r as l,u as x,e as me,j as e}from"./index.Cgn8UqAd.js";import{A as xe}from"./AssetDetailSidePanel.DLRsI4_c.js";const he=({onNavigate:q})=>{const[r,y]=l.useState(null),[h,W]=l.useState(!1),[j,$]=l.useState(!1),[c,z]=l.useState("all"),[T,D]=l.useState(null),[U,F]=l.useState(!1),[w,N]=l.useState(0),[v,k]=l.useState(""),_=s=>{switch(s){case"seo":return{"SEO Title Optimization":!1,"Meta Description Quality":!1,"Keyword Density Check":!1,"H1/H2 Structure":!1,"Internal/External Links":!1,"Content Readability":!1};case"smm":return{"Platform Guidelines Compliance":!1,"Visual Quality & Dimensions":!1,"Caption & Hashtag Quality":!1,"Brand Voice Consistency":!1,"CTA Effectiveness":!1,"Engagement Potential":!1};default:return{"Brand Compliance":!1,"Technical Specs Met":!1,"Content Quality":!1,"SEO Optimization":!1,"Legal / Regulatory Check":!1,"Tone of Voice":!1}}},[C,R]=l.useState(_("web")),{data:S=[],loading:g,refresh:G,update:O}=x("assetLibrary"),m=l.useMemo(()=>S.map(s=>({...s,name:s.name||s.asset_name||"Untitled Asset"})),[S]),{data:B=[]}=x("users"),{data:H=[]}=x("services"),{data:J=[]}=x("tasks"),{data:K=[]}=x("asset-category-master"),{data:X=[]}=x("asset-type-master"),{user:o,isAdmin:d,hasPermission:Y}=me();l.useEffect(()=>{},[S,g,d,o]);const Z=l.useMemo(()=>{const s=new Map;return B.forEach(t=>s.set(t.id,t)),s},[B]),p=d||Y("canPerformQC"),[A,ee]=l.useState(!1);l.useEffect(()=>{!g&&!A&&ee(!0)},[g,A]);const Q=!A&&g,se=s=>{const t=s.linked_service_id||s.linked_service_ids&&s.linked_service_ids[0];return t&&H.find(n=>n.id===t)?.service_name||"-"},te=s=>{const t=s.linked_task_id||s.linked_task;if(!t)return"-";const a=J.find(n=>n.id===t);return a?.name||a?.task_name||"-"},re=s=>{const t=s.designed_by||s.created_by;return t&&Z.get(t)?.name||"-"},E=s=>s.asset_type?X.find(a=>a.asset_type_name?.toLowerCase()===s.asset_type?.toLowerCase())?.asset_type_name||s.asset_type:"-",V=s=>s.asset_category?K.find(a=>a.category_name?.toLowerCase()===s.asset_category?.toLowerCase())?.category_name||s.asset_category:"-",ae=s=>{const t=s.qc_status||s.status||"Pending";return["Pass","QC Approved","Published"].includes(t)?e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Pass"}):["Fail","QC Rejected"].includes(t)?e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:"Fail"}):["Rework","Rework Required"].includes(t)?e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-800",children:"Rework"}):e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-800",children:"Pending"})},ne=s=>{const t=s.submitted_at||s.created_at;if(!t)return"-";const a=new Date(t),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),M=a.getFullYear();return`${n}/${i}/${M}`},L=s=>{D(s),F(!0)},ie=()=>{F(!1),D(null)},b=async()=>{W(!0);try{await G?.()}finally{setTimeout(()=>W(!1),500)}},f=l.useCallback(s=>o?s.submitted_by===o.id||s.created_by===o.id||s.designed_by===o.id:!1,[o]),u=l.useMemo(()=>{let s=d?m:m.filter(f);switch(c){case"pending":return s.filter(t=>t.status==="Pending QC Review"||t.status==="Draft"||!t.status);case"rework":return s.filter(t=>t.status==="Rework Required"||t.qc_status==="Rework");case"approved":return s.filter(t=>t.status==="QC Approved"||t.qc_status==="Pass"||t.status==="Published");case"rejected":return s.filter(t=>t.status==="QC Rejected"||t.qc_status==="Fail");default:return s}},[m,c,d,f]),I=l.useMemo(()=>{const s=d?m:m.filter(f);return{all:s.length,pending:s.filter(t=>t.status==="Pending QC Review"||t.status==="Draft"||!t.status).length,rework:s.filter(t=>t.status==="Rework Required"||t.qc_status==="Rework").length,approved:s.filter(t=>t.status==="QC Approved"||t.qc_status==="Pass"||t.status==="Published").length,rejected:s.filter(t=>t.status==="QC Rejected"||t.qc_status==="Fail").length}},[m,d,f]),le=!d&&I.rework>0,oe=s=>{y(s),N(s.qc_score||0),k(s.qc_remarks||""),R(_(s.application_type))},P=async s=>{if(!r||!o){alert("No asset selected or user not logged in");return}if(!p){alert("You do not have permission to perform QC reviews. Please switch to Admin role.");return}$(!0);try{const a=await fetch(`/api/v1/assetLibrary/${r.id}/qc-review`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":String(o.id),"X-User-Role":o.role},body:JSON.stringify({qc_score:w||0,qc_remarks:v||"",qc_decision:s,qc_reviewer_id:o.id,user_role:o.role,checklist_items:C,checklist_completion:Object.values(C).every(n=>n),linking_active:s==="approved"})});if(a.ok){const n=s==="approved"?"Asset approved and linked to service!":s==="rework"?"Asset sent for rework!":"Asset rejected!";try{if(O&&r&&r.id){const i={};s==="approved"?(i.qc_status="Pass",i.status="QC Approved"):s==="rejected"?(i.qc_status="Fail",i.status="QC Rejected"):s==="rework"&&(i.qc_status="Rework",i.status="Rework Required"),i.qc_score=w||0,i.qc_remarks=v||"",await O(r.id,i)}}catch(i){console.warn("Optimistic update failed:",i)}alert(n),y(null),N(0),k(""),R(_("web")),b()}else{const n=await a.json().catch(()=>({})),i=n.error||n.message||"Failed to submit QC review",M=n.code||"UNKNOWN_ERROR";console.error("QC Submit failed:",{status:a.status,errorCode:M,errorMessage:i,errorData:n}),alert(`Error (${a.status}): ${i}`)}}catch(t){console.error("QC Submit error:",t);const a=t.message||t.error||"Network error occurred";alert(`Failed to submit QC review: ${a}`)}finally{$(!1)}},ce=async s=>{if(confirm(`Send "${s.name||s.name}" to QC Review?`))try{const a=await fetch(`/api/v1/assetLibrary/${s.id}/submit-qc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submitted_by:o?.id,seo_score:s.seo_score,grammar_score:s.grammar_score})});if(a.ok)alert("Asset submitted for QC review!"),b();else{const n=await a.json().catch(()=>({})),i=n.error||n.message||"Unknown error";console.error("Send to QC failed:",{status:a.status,errorData:n}),alert(`Failed to submit (${a.status}): ${i}`)}}catch(t){console.error("Send to QC error:",t);const a=t.message||"Network error occurred";alert(`Failed to submit: ${a}`)}},de=async s=>{if(confirm(`Resubmit "${s.name||s.name}" for QC review?`))try{const a=await fetch(`/api/v1/assetLibrary/${s.id}/submit-qc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submitted_by:o?.id,rework_count:(s.rework_count||0)+1,seo_score:s.seo_score,grammar_score:s.grammar_score})});if(a.ok)alert("Asset resubmitted for QC!"),b();else{const n=await a.json().catch(()=>({})),i=n.error||n.message||"Unknown error";console.error("Resubmit QC failed:",{status:a.status,errorData:n}),alert(`Failed to resubmit (${a.status}): ${i}`)}}catch(t){console.error("Resubmit QC error:",t);const a=t.message||"Network error occurred";alert(`Failed to resubmit: ${a}`)}};if(r){const s=H.find(t=>t.id===(r.linked_service_id||r.linked_service_ids?.[0]));return e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsxs("button",{onClick:()=>y(null),className:"mb-4 text-gray-500 hover:text-gray-700 flex items-center gap-1 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to List"]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-400 text-sm mb-1",children:["#",r.id]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name||r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:r.application_type?.toUpperCase()||"WEB"}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium",children:E(r)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Proposed Service Link"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[s?.service_name||"Oncology"," â†’ ",V(r)||"Treatment"]}),e.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-1",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-xs text-orange-500",children:"Link Inactive (Pending QC)"})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 h-72 flex items-center justify-center mb-6",children:r.thumbnail_url||r.file_url?e.jsx("img",{src:r.thumbnail_url||r.file_url,alt:r.name||r.name,className:"max-h-full max-w-full object-contain"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No media attached"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:r.web_description||r.seo_content_description||r.smm_description||"Article detailing new findings in cancer research."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-1",children:"Repository"}),e.jsx("p",{className:"text-gray-700 text-sm",children:r.repository||"Web"})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-1",children:"URL Slug"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:r.web_url||r.seo_target_url||"/oncology/research-2024"})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-2",children:"Keywords"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(r.keywords?.length?r.keywords:[]).map((t,a)=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-600 rounded-full text-xs font-medium border border-blue-200",children:t},a)),(!r.keywords||r.keywords.length===0)&&e.jsx("span",{className:"text-gray-400 text-sm",children:"No keywords specified"})]})]}),(r.web_body_content||r.smm_description)&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-2",children:"Body Content"}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 max-h-96 overflow-y-auto",children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:r.web_body_content||r.smm_description||""}})})]}),(r.web_h1||r.web_h2_1||r.web_h2_2)&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-2",children:"Heading Tags"}),e.jsxs("div",{className:"space-y-2",children:[r.web_h1&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs font-bold",children:"H1"}),e.jsx("span",{className:"text-gray-700 text-sm",children:r.web_h1})]}),r.web_h2_1&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-bold",children:"H2"}),e.jsx("span",{className:"text-gray-700 text-sm",children:r.web_h2_1})]}),r.web_h2_2&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-bold",children:"H2"}),e.jsx("span",{className:"text-gray-700 text-sm",children:r.web_h2_2})]}),r.web_h3_tags&&r.web_h3_tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.web_h3_tags.map((t,a)=>e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-cyan-100 text-cyan-700 rounded text-xs font-bold",children:"H3"}),e.jsx("span",{className:"text-gray-600 text-sm",children:t})]},a))})]})]}),r.web_meta_description&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-2",children:"Meta Description"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg border border-gray-200 p-3",children:r.web_meta_description})]}),(r.seo_score||r.grammar_score)&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"text-rose-500 text-sm font-medium block mb-2",children:"AI Scores"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.seo_score!==void 0&&r.seo_score!==null&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"SEO Score"}),e.jsx("p",{className:`text-xl font-bold ${r.seo_score>=80?"text-green-600":r.seo_score>=60?"text-amber-600":"text-red-600"}`,children:r.seo_score})]}),r.grammar_score!==void 0&&r.grammar_score!==null&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"Grammar Score"}),e.jsx("p",{className:`text-xl font-bold ${r.grammar_score>=80?"text-green-600":r.grammar_score>=60?"text-amber-600":"text-red-600"}`,children:r.grammar_score})]})]})]})]}),e.jsxs("div",{className:"w-80 bg-white rounded-xl shadow-sm border-2 border-indigo-300 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3 pb-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"QC Assessment"})]}),p?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Admin"}):e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"No Access"})]}),!p&&e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsx("p",{className:"text-amber-800 text-xs",children:"Switch to Admin role to perform QC reviews."})}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QC Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:w,onChange:t=>N(Number(t.target.value)),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base",placeholder:"0"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Compliance Checklist"}),e.jsx("div",{className:"space-y-2.5",children:Object.entries(C).map(([t,a])=>e.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:n=>R(i=>({...i,[t]:n.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-600 text-sm",children:t})]},t))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Remarks / Comments"}),e.jsx("textarea",{value:v,onChange:t=>k(t.target.value),rows:3,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none text-sm",placeholder:"Enter feedback here..."})]}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>P("rejected"),disabled:j,className:"flex-1 px-4 py-2.5 border-2 border-red-400 text-red-500 rounded-lg font-semibold hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]}),e.jsxs("button",{onClick:()=>P("approved"),disabled:j,className:"flex-1 px-4 py-2.5 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]})]}),e.jsx("button",{onClick:()=>P("rework"),disabled:j,className:"w-full px-4 py-2 border border-orange-400 text-orange-600 rounded-lg font-medium hover:bg-orange-50 transition-colors disabled:opacity-50 text-sm",children:"Send for Rework"})]})]})]})}return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Asset QC Review"}),e.jsx("p",{className:"text-gray-500 mt-1",children:p?"Review and approve assets submitted for quality control":"View your assets and their QC status"})]}),d?e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-semibold",children:"Admin"}):e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold",children:"User"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>q?.("assets"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Assets"]}),e.jsxs("button",{onClick:b,disabled:h,className:`px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center gap-2 ${h?"opacity-75 cursor-not-allowed":""}`,children:[e.jsx("svg",{className:`w-4 h-4 ${h?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),h?"Refreshing...":"Refresh"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c==="all"?"All Assets":c==="pending"?"Pending QC Review":c==="rework"?"Assets Requiring Rework":c==="approved"?"Approved Assets":"Rejected Assets"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[u.length," asset",u.length!==1?"s":""]})]}),e.jsx("div",{className:"px-6 py-3 border-b border-gray-100 bg-gray-50",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"rework",label:"Rework"},{key:"approved",label:"Approved"},{key:"rejected",label:"Rejected"}].map(s=>{const t=s.key==="rework"&&le&&c!=="rework";return e.jsxs("button",{onClick:()=>z(s.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===s.key?"bg-indigo-600 text-white":t?"bg-orange-100 text-orange-700 border-2 border-orange-400 animate-pulse":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[s.label," (",I[s.key],")",t&&e.jsx("span",{className:"ml-1.5 inline-flex items-center justify-center w-2 h-2 bg-orange-500 rounded-full"})]},s.key)})})}),Q&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mb-4"}),e.jsx("span",{className:"text-gray-500",children:"Loading assets..."})]}),!Q&&u.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No Assets Found"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:c==="all"?"No assets have been uploaded yet. Upload assets from the Assets page.":`No assets match the "${c}" filter.`}),c==="all"&&e.jsxs("button",{onClick:()=>q?.("assets"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Go to Assets"]})]}),!Q&&u.length>0&&e.jsx("div",{className:"overflow-x-auto",style:{maxHeight:"calc(100vh - 300px)"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"max-content"},children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"80px"},children:"Thumbnail"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"150px"},children:"Asset Name"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"120px"},children:"Asset Type"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"120px"},children:"Category"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"130px"},children:"Content Type"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"140px"},children:"Linked Service"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"130px"},children:"Linked Task"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"110px"},children:"QC Status"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"90px"},children:"Version"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"120px"},children:"Designer"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"120px"},children:"Uploaded At"}),e.jsx("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"80px"},children:"Usage"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wide whitespace-nowrap",style:{minWidth:"150px"},children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center border border-gray-200",children:s.thumbnail_url||s.file_url?e.jsx("img",{src:s.thumbnail_url||s.file_url,alt:s.name||s.name,className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:()=>L(s),className:"text-indigo-600 hover:text-indigo-800 font-medium text-sm text-left hover:underline whitespace-nowrap",children:s.name||s.name})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2.5 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:E(s)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:V(s)})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:s.content_type||"-"}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:se(s)}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:te(s)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:ae(s)}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:s.version_number||"v1.0"}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:re(s)}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm whitespace-nowrap",children:ne(s)}),e.jsx("td",{className:"px-4 py-4 text-center whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:s.usage_count||0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:p?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>L(s),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200",children:"View"}),s.status!=="QC Approved"&&s.status!=="QC Rejected"&&s.status!=="Published"&&s.qc_status!=="Pass"&&s.qc_status!=="Fail"&&e.jsx("button",{onClick:()=>oe(s),className:"px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Review"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>L(s),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200",children:"View"}),s.status==="Draft"&&e.jsx("button",{onClick:()=>ce(s),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Send to QC"}),s.status==="Rework Required"&&e.jsx("button",{onClick:()=>de(s),className:"px-3 py-1.5 bg-orange-500 text-white rounded-lg text-sm hover:bg-orange-600",children:"Resubmit"})]})})]},s.id))})]})})]}),U&&T&&e.jsx(xe,{asset:T,isOpen:U,onClose:ie})]})};export{he as default};
