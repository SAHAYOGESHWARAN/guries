import{u as r,r as n,j as e}from"./index.Cgn8UqAd.js";import{T as w}from"./Table.qlFSYBMu.js";import{L as y,D as k}from"./Charts.E4b3PdqH.js";import{e as T}from"./csvHelper.D2kXyc6K.js";const M=()=>{const{data:t,refresh:d}=r("dashboardMetrics"),{data:i}=r("brands"),{data:a}=r("okrs"),[c,x]=n.useState("All Brands"),[h,m]=n.useState("All Departments"),[b,g]=n.useState("Monthly"),u=[{label:"Jan",value:12e3},{label:"Feb",value:15e3},{label:"Mar",value:14500},{label:"Apr",value:18e3},{label:"May",value:22e3},{label:"Jun",value:25e3}],o=a.length>0?Math.round(a.reduce((s,l)=>s+(l.progress||0),0)/a.length):0,p=[{id:1,name:"On Track",value:t.filter(s=>s.status==="On Track").length},{id:2,name:"At Risk",value:t.filter(s=>s.status==="Warning").length},{id:3,name:"Off Track",value:t.filter(s=>s.status==="Critical").length}],f=()=>{d()},v=()=>{T(t,"performance_metrics_export")},j=()=>{alert("View configuration saved to your profile.")},N=[{header:"KPI Name",accessor:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.kpi_name}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:s.metric_type})]})},{header:"Baseline",accessor:"baseline",className:"text-slate-500 font-mono text-xs"},{header:"Target",accessor:"target",className:"font-medium text-slate-700"},{header:"Current",accessor:s=>e.jsx("span",{className:"font-bold text-slate-900",children:s.current})},{header:"Delta",accessor:s=>e.jsx("span",{className:`text-xs font-bold ${s.delta.startsWith("+")?"text-green-600":"text-red-600"}`,children:s.delta})},{header:"Achievement",accessor:s=>e.jsxs("div",{className:"w-24",children:[e.jsxs("div",{className:"text-[10px] text-right mb-1 font-medium",children:[s.percent_achieved,"%"]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${s.percent_achieved>=100?"bg-green-500":s.percent_achieved>=80?"bg-blue-500":"bg-red-500"}`,style:{width:`${Math.min(s.percent_achieved,100)}%`}})})]})},{header:"Gold Std.",accessor:"gold_standard",className:"text-xs text-amber-600 font-medium"},{header:"Status",accessor:s=>e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${s.status==="On Track"?"bg-green-50 text-green-700 border border-green-100":s.status==="Warning"?"bg-yellow-50 text-yellow-700 border border-yellow-100":"bg-red-50 text-red-700 border border-red-100"}`,children:s.status})}];return e.jsxs("div",{className:"space-y-6 h-full overflow-y-auto pr-1 p-6 animate-fade-in w-full",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"Performance Dashboard"}),e.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"OKR + KPI + Competitor + Gold Standard Analytics"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:j,className:"bg-white text-slate-600 border border-slate-300 px-4 py-2 rounded-lg font-medium text-xs hover:bg-slate-50 shadow-sm transition-colors",children:"Save View"}),e.jsx("button",{onClick:v,className:"bg-white text-slate-600 border border-slate-300 px-4 py-2 rounded-lg font-medium text-xs hover:bg-slate-50 shadow-sm transition-colors",children:"Export"}),e.jsx("button",{onClick:f,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium text-xs hover:bg-indigo-700 shadow-sm transition-colors",children:"Refresh"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Brand Context"}),e.jsxs("select",{value:c,onChange:s=>x(s.target.value),className:"bg-slate-50 border border-slate-300 rounded-lg px-3 py-2 text-sm min-w-[160px] focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{children:"All Brands"}),i.map(s=>e.jsx("option",{children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Department"}),e.jsxs("select",{value:h,onChange:s=>m(s.target.value),className:"bg-slate-50 border border-slate-300 rounded-lg px-3 py-2 text-sm min-w-[160px] focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{children:"All Departments"}),e.jsx("option",{children:"Marketing"}),e.jsx("option",{children:"SEO"}),e.jsx("option",{children:"Content"}),e.jsx("option",{children:"Dev"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Cycle"}),e.jsxs("select",{value:b,onChange:s=>g(s.target.value),className:"bg-slate-50 border border-slate-300 rounded-lg px-3 py-2 text-sm min-w-[140px] focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Quarterly"}),e.jsx("option",{children:"Yearly"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{label:"OKR Achievement",val:`${o}%`,sub:"Avg across org",status:o>70?"On Track":"Lagging",color:"text-green-600",bg:"bg-green-50"},{label:"Traffic Growth",val:"+24%",sub:"vs last cycle",status:"Good",color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Ranking Improvement",val:"15",sub:"Top 10 Keywords",status:"On Track",color:"text-purple-600",bg:"bg-purple-50"},{label:"Engagement Score",val:"88%",sub:"+3%",status:"On Track",color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Conversion Rate",val:"2.4%",sub:"-0.2%",status:"Warning",color:"text-orange-600",bg:"bg-orange-50"},{label:"Cost Per Lead",val:"$45",sub:"-$5",status:"Excellent",color:"text-blue-600",bg:"bg-blue-50"}].map((s,l)=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-all group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 truncate group-hover:text-indigo-600 transition-colors",children:s.label}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:s.val}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-[10px] font-bold ${s.color}`,children:s.sub}),e.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full font-bold uppercase ${s.bg} ${s.color}`,children:s.status})]})]},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-80",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:"Traffic vs Target Trend"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("span",{className:"flex items-center text-xs text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mr-1"})," Actual"]})})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(y,{data:u,color:"text-indigo-500"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-sm mb-4",children:"Metric Health Distribution"}),e.jsx("div",{className:"h-64 flex items-center justify-center",children:t.length>0?e.jsx(k,{value:Math.round(t.filter(s=>s.status==="On Track").length/t.length*100),color:"text-emerald-500",label:"Healthy",size:140}):e.jsx("div",{className:"text-slate-400 text-xs italic",children:"No data available"})}),e.jsx("div",{className:"flex justify-center gap-4 mt-4",children:p.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:s.value}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:s.name})]},s.id))})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col overflow-hidden min-h-[400px]",children:e.jsx(w,{columns:N,data:t,title:"Detailed Performance Metrics",emptyMessage:"No performance metrics tracked. Configure them in the Settings."})})]})};export{M as default};
