import{u as d,r as t,j as e,S as p}from"./index.Cgn8UqAd.js";import{T as h}from"./Table.qlFSYBMu.js";import{M as b}from"./Modal.Dm3XWcYn.js";import{r as I}from"./gemini.CcsfAiQp.js";import"./index.Cjd9_PBs.js";const P=()=>{const{data:f,create:j}=d("emails"),{data:g,create:y}=d("voiceProfiles"),{data:N}=d("callLogs"),[n,v]=t.useState("Email"),[w,r]=t.useState(!1),[C,i]=t.useState(!1),[a,c]=t.useState({subject:"",recipient:"",status:"draft"}),[l,o]=t.useState({name:"",language:"en-US",gender:"Female",provider:"ElevenLabs"}),[S,m]=t.useState(!1),[E,u]=t.useState(""),A=async()=>{await j({...a,scheduled_at:new Date().toISOString()}),r(!1),c({subject:"",recipient:"",status:"draft"})},V=async()=>{await y({...l,voice_id:`generated-${Date.now()}`}),i(!1),o({name:"",language:"en-US",gender:"Female",provider:"ElevenLabs"})},k=async s=>{m(!0);try{const x=`Analyze this call log summary: "${s.summary||"No summary available."}"
            Determine customer sentiment and suggest next best action.`,D=await I(x,{model:"gemini-2.5-flash"});u(D.text)}catch{u("Analysis failed.")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col animate-fade-in w-full",children:[e.jsx("div",{className:"flex justify-between items-start flex-shrink-0",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Communication Hub"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Unified center for Email Automation, Voice AI, and Call Intelligence"})]})}),e.jsx("div",{className:"border-b border-slate-200 flex-shrink-0",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["Email","Voice","Calls"].map(s=>e.jsx("button",{onClick:()=>v(s),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:s},s))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n==="Email"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-blue-700 shadow-sm",children:"Compose Email"})}),e.jsx(h,{columns:[{header:"Subject",accessor:"subject",className:"font-medium"},{header:"Recipient",accessor:"recipient"},{header:"Status",accessor:s=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${s.status==="sent"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})},{header:"Date",accessor:s=>new Date(s.created_at).toLocaleDateString()}],data:f,title:"Campaign Emails"})]}),n==="Voice"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>i(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-purple-700 shadow-sm flex items-center",children:[e.jsx(p,{})," ",e.jsx("span",{className:"ml-2",children:"New AI Voice"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:g.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center text-2xl",children:"ðŸŽ™ï¸"}),e.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded",children:s.provider})]}),e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:[s.language," â€¢ ",s.gender]}),e.jsx("button",{className:"w-full border border-purple-200 text-purple-700 py-2 rounded-lg text-sm font-medium hover:bg-purple-50",children:"Generate Script"})]},s.id))})]}),n==="Calls"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-2 flex items-center",children:[e.jsx(p,{})," ",e.jsx("span",{className:"ml-2",children:"Call Sentiment Analysis"})]}),e.jsx("div",{className:"h-32 flex items-center justify-center text-slate-400 bg-slate-50 rounded-lg border border-dashed border-slate-200",children:S?"Analyzing transcript...":E||"Select a call to analyze sentiment trends."})]}),e.jsx(h,{columns:[{header:"Customer",accessor:"customer_phone"},{header:"Duration",accessor:s=>`${Math.floor(s.duration/60)}m ${s.duration%60}s`},{header:"Sentiment",accessor:s=>e.jsx("span",{className:`font-bold ${s.sentiment==="Positive"?"text-green-600":"text-red-600"}`,children:s.sentiment})},{header:"Date",accessor:s=>new Date(s.start_time).toLocaleString()},{header:"Actions",accessor:s=>e.jsx("button",{onClick:()=>k(s),className:"text-blue-600 hover:underline text-xs font-bold",children:"Analyze"})}],data:N,title:"Call Logs"})]})]}),e.jsx(b,{isOpen:w,onClose:()=>r(!1),title:"Compose Email",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Recipient",className:"w-full p-2 border rounded",value:a.recipient,onChange:s=>c({...a,recipient:s.target.value})}),e.jsx("input",{type:"text",placeholder:"Subject",className:"w-full p-2 border rounded",value:a.subject,onChange:s=>c({...a,subject:s.target.value})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Send"})})]})}),e.jsx(b,{isOpen:C,onClose:()=>i(!1),title:"Create Voice Profile",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Name",className:"w-full p-2 border rounded",value:l.name,onChange:s=>o({...l,name:s.target.value})}),e.jsxs("select",{className:"w-full p-2 border rounded",value:l.language,onChange:s=>o({...l,language:s.target.value}),children:[e.jsx("option",{children:"en-US"}),e.jsx("option",{children:"en-GB"}),e.jsx("option",{children:"es-ES"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:V,className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create Profile"})})]})})]})};export{P as default};
