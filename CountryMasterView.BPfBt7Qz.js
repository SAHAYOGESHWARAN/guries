import{r as l,j as e,A as f}from"./index.Cgn8UqAd.js";import{X as M,P as R,a as T,T as I}from"./x.BiCs_uOD.js";const P=["English","Spanish","French","German","Italian","Portuguese","Dutch","Russian","Chinese","Japanese","Korean","Arabic","Hindi","Turkish","Polish","Swedish","Norwegian","Danish","Finnish","Greek"],$=["United States","United Kingdom","Canada","Australia","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Czech Republic","Hungary","Romania","Portugal","Greece","Ireland","New Zealand","Singapore","India","Japan","South Korea","China","Brazil","Mexico","Argentina","Chile","Colombia","Peru","Venezuela","South Africa","Egypt","Nigeria","Kenya","UAE","Saudi Arabia","Israel","Turkey","Russia","Ukraine","Thailand","Vietnam","Philippines","Indonesia","Malaysia","Pakistan","Bangladesh"];function L({country:a,regions:_,onSave:p,onClose:b}){const[n,u]=l.useState({country_name:"",iso_code:"",region:"",default_language:"",allowed_for_backlinks:!1,allowed_for_content_targeting:!1,allowed_for_smm_targeting:!1,status:"active"}),[r,d]=l.useState({});l.useEffect(()=>{a&&u({country_name:a.country_name,iso_code:a.iso_code,region:a.region,default_language:a.default_language||"",allowed_for_backlinks:!!a.allowed_for_backlinks,allowed_for_content_targeting:!!a.allowed_for_content_targeting,allowed_for_smm_targeting:!!a.allowed_for_smm_targeting,status:a.status})},[a]);const m=()=>{const s={};return n.country_name.trim()||(s.country_name="Country name is required"),n.iso_code.trim()?n.iso_code.length>10&&(s.iso_code="ISO code must be 10 characters or less"):s.iso_code="ISO code is required",n.region.trim()||(s.region="Region is required"),d(s),Object.keys(s).length===0},i=s=>{const{name:c,value:h,type:j}=s.target;u(g=>({...g,[c]:j==="checkbox"?s.target.checked:h})),r[c]&&d(g=>({...g,[c]:""}))},x=s=>{u(c=>({...c,[s]:!c[s]}))},y=s=>{s.preventDefault(),m()&&p(n)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Country":"Add New Country"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Update country settings and targeting configurations"})]}),e.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700",children:e.jsx(M,{size:24})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country Name *"}),e.jsxs("select",{name:"country_name",value:n.country_name,onChange:i,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.country_name?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select country"}),$.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.country_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.country_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ISO Code *"}),e.jsx("input",{type:"text",name:"iso_code",value:n.iso_code,onChange:i,placeholder:"e.g., US, GB, CA",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.iso_code?"border-red-500":"border-gray-300"}`}),r.iso_code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.iso_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region *"}),e.jsxs("select",{name:"region",value:n.region,onChange:i,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.region?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select region"}),e.jsx("option",{value:"North America",children:"North America"}),e.jsx("option",{value:"South America",children:"South America"}),e.jsx("option",{value:"Europe",children:"Europe"}),e.jsx("option",{value:"Asia",children:"Asia"}),e.jsx("option",{value:"Africa",children:"Africa"}),e.jsx("option",{value:"Oceania",children:"Oceania"}),e.jsx("option",{value:"Middle East",children:"Middle East"})]}),r.region&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.region})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Language"}),e.jsxs("select",{name:"default_language",value:n.default_language,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select language"}),P.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Targeting Permissions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.allowed_for_backlinks,onChange:()=>x("allowed_for_backlinks"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Allowed for Backlinks?"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enable backlink targeting for this country"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.allowed_for_content_targeting,onChange:()=>x("allowed_for_content_targeting"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Allowed for Content Targeting?"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enable content localization and targeting for this country"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.allowed_for_smm_targeting,onChange:()=>x("allowed_for_smm_targeting"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Allowed for SMM Targeting?"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enable social media marketing targeting for this country"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"active",checked:n.status==="active",onChange:i,className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"inactive",checked:n.status==="inactive",onChange:i,className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Inactive"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Country Configuration:"})," Targeting permissions control which services and campaigns can operate in this country. Ensure compliance with local regulations when enabling targeting options."]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:b,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700",children:a?"Update Country":"Add Country"})]})]})]})})}function O(){const[a,_]=l.useState([]),[p,b]=l.useState([]),[n,u]=l.useState(!0),[r,d]=l.useState(!1),[m,i]=l.useState(null),[x,y]=l.useState("All Regions"),[s,c]=l.useState("All Status"),[h,j]=l.useState("");l.useEffect(()=>{g(),w()},[]);const g=async()=>{try{const o=await(await fetch(`${f}/country-master`)).json();_(o)}catch(t){console.error("Error fetching countries:",t)}finally{u(!1)}},w=async()=>{try{const o=await(await fetch(`${f}/country-master/list/regions`)).json();b(o)}catch(t){console.error("Error fetching regions:",t)}},v=a.filter(t=>{const o=t.country_name.toLowerCase().includes(h.toLowerCase())||t.iso_code.toLowerCase().includes(h.toLowerCase()),N=x==="All Regions"||t.region===x,E=s==="All Status"||t.status===s;return o&&N&&E}),C=()=>{i(null),d(!0)},k=t=>{i(t),d(!0)},S=async t=>{if(confirm("Are you sure you want to delete this country?"))try{await fetch(`${f}/country-master/${t}`,{method:"DELETE"}),g()}catch(o){console.error("Error deleting country:",o)}},A=async t=>{try{const o=m?"PUT":"POST",N=m?`${f}/country-master/${m.id}`:`${f}/country-master`;await fetch(N,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),d(!1),g()}catch(o){console.error("Error saving country:",o)}};return n?e.jsx("div",{className:"p-6 text-center",children:"Loading..."}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Country Master"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage country configurations, regional settings, and targeting permissions"})]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(R,{size:20}),"Add Country"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search by country name or ISO code...",value:h,onChange:t=>j(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:x,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"All Regions"}),p.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:s,onChange:t=>c(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"active"}),e.jsx("option",{children:"inactive"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Country Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"ISO Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Region"}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Backlinks"}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Content"}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"SMM"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:t.country_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:t.iso_code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.region}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${t.allowed_for_backlinks?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.allowed_for_backlinks?"✓":"✗"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${t.allowed_for_content_targeting?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.allowed_for_content_targeting?"✓":"✗"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${t.allowed_for_smm_targeting?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.allowed_for_smm_targeting?"✓":"✗"})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${t.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(t),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx(T,{size:18})}),e.jsx("button",{onClick:()=>S(t.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(I,{size:18})})]})})]},t.id))})]})}),v.length===0&&e.jsx("div",{className:"text-center py-12 bg-white rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No countries found. Create one to get started."})}),e.jsxs("div",{className:"mt-6 grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Countries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Backlinks Enabled"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.allowed_for_backlinks).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Content Targeting"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.allowed_for_content_targeting).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"SMM Targeting"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.allowed_for_smm_targeting).length})]})]})]}),r&&e.jsx(L,{country:m,regions:p,onSave:A,onClose:()=>d(!1)})]})}const D=()=>e.jsx(O,{});export{D as default};
