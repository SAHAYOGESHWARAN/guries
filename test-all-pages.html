<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Navigation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .test-button {
            display: inline-block;
            margin: 5px;
            padding: 10px 15px;
            background: #4f46e5;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .test-button:hover {
            background: #3730a3;
        }

        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }

        .success {
            background: #d1fae5;
            color: #065f46;
        }

        .error {
            background: #fee2e2;
            color: #991b1b;
        }

        .info {
            background: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1>Marketing Control Center - Page Navigation Test</h1>
        <div id="status" class="status info">Click buttons to test page navigation...</div>

        <h2>Main Pages</h2>
        <button class="test-button" onclick="testPage('dashboard')">Dashboard</button>
        <button class="test-button" onclick="testPage('projects')">Projects</button>
        <button class="test-button" onclick="testPage('campaigns')">Campaigns</button>
        <button class="test-button" onclick="testPage('tasks')">Tasks</button>
        <button class="test-button" onclick="testPage('assets')">Assets</button>
        <button class="test-button" onclick="testPage('users')">Users</button>

        <h2>Repository Pages</h2>
        <button class="test-button" onclick="testPage('content-repository')">Content Repository</button>
        <button class="test-button" onclick="testPage('service-pages')">Service Pages</button>
        <button class="test-button" onclick="testPage('smm-posting')">SMM Repository</button>
        <button class="test-button" onclick="testPage('on-page-errors')">On-Page Errors</button>
        <button class="test-button" onclick="testPage('backlink-submission')">Backlinks</button>
        <button class="test-button" onclick="testPage('toxic-backlinks')">Toxic Backlinks</button>
        <button class="test-button" onclick="testPage('ux-issues')">UX Issues</button>
        <button class="test-button" onclick="testPage('promotion-repository')">Promotion Repository</button>
        <button class="test-button" onclick="testPage('competitor-repository')">Competitor Repository</button>
        <button class="test-button" onclick="testPage('competitor-backlinks')">Competitor Backlinks</button>

        <h2>Analytics & Dashboards</h2>
        <button class="test-button" onclick="testPage('performance-dashboard')">Performance Dashboard</button>
        <button class="test-button" onclick="testPage('effort-dashboard')">Effort Dashboard</button>
        <button class="test-button" onclick="testPage('employee-scorecard')">Employee Scorecard</button>
        <button class="test-button" onclick="testPage('employee-comparison')">Employee Comparison</button>
        <button class="test-button" onclick="testPage('team-leader-dashboard')">Team Leader Dashboard</button>
        <button class="test-button" onclick="testPage('ai-evaluation-engine')">AI Evaluation</button>
        <button class="test-button" onclick="testPage('workload-prediction')">Workload Prediction</button>
        <button class="test-button" onclick="testPage('reward-penalty')">Reward Penalty</button>
        <button class="test-button" onclick="testPage('kpi-tracking')">KPI Tracking</button>
        <button class="test-button" onclick="testPage('traffic-ranking')">Traffic Ranking</button>
        <button class="test-button" onclick="testPage('okr-dashboard')">OKR Dashboard</button>

        <h2>Master Data & Configuration</h2>
        <button class="test-button" onclick="testPage('service-sub-service-master')">Service Master</button>
        <button class="test-button" onclick="testPage('sub-service-master')">Sub-Service Master</button>
        <button class="test-button" onclick="testPage('keyword-master')">Keyword Master</button>
        <button class="test-button" onclick="testPage('backlink-master')">Backlink Master</button>
        <button class="test-button" onclick="testPage('industry-sector-master')">Industry Sector Master</button>
        <button class="test-button" onclick="testPage('content-type-master')">Content Type Master</button>
        <button class="test-button" onclick="testPage('asset-type-master')">Asset Type Master</button>
        <button class="test-button" onclick="testPage('asset-category-master')">Asset Category Master</button>
        <button class="test-button" onclick="testPage('platform-master')">Platform Master</button>
        <button class="test-button" onclick="testPage('country-master')">Country Master</button>
        <button class="test-button" onclick="testPage('seo-error-type-master')">SEO Error Type Master</button>
        <button class="test-button" onclick="testPage('workflow-stage-master')">Workflow Stage Master</button>
        <button class="test-button" onclick="testPage('user-role-master')">User Role Master</button>
        <button class="test-button" onclick="testPage('audit-checklists')">Audit Checklists</button>
        <button class="test-button" onclick="testPage('qc-weightage-config')">QC Weightage Config</button>
        <button class="test-button" onclick="testPage('effort-target-config')">Effort Target Config</button>
        <button class="test-button" onclick="testPage('gold-standard-benchmark')">Gold Standard Benchmark</button>
        <button class="test-button" onclick="testPage('competitor-benchmark-master')">Competitor Benchmark
            Master</button>
        <button class="test-button" onclick="testPage('performance-benchmark')">Performance Benchmark</button>

        <h2>Quality & Communication</h2>
        <button class="test-button" onclick="testPage('qc-dashboard')">QC Dashboard</button>
        <button class="test-button" onclick="testPage('asset-qc')">Asset QC</button>
        <button class="test-button" onclick="testPage('communication-hub')">Communication Hub</button>
        <button class="test-button" onclick="testPage('knowledge-base')">Knowledge Base</button>
        <button class="test-button" onclick="testPage('quality-compliance')">Quality Compliance</button>

        <h2>System & Settings</h2>
        <button class="test-button" onclick="testPage('admin-console')">Admin Console</button>
        <button class="test-button" onclick="testPage('integrations')">Integrations</button>
        <button class="test-button" onclick="testPage('backend-source')">Backend Source</button>
        <button class="test-button" onclick="testPage('settings')">Settings</button>
        <button class="test-button" onclick="testPage('graphics-plan')">Graphics Plan</button>

        <h2>Test All Pages</h2>
        <button class="test-button" onclick="testAllPages()" style="background: #059669;">Test All Pages</button>
        <button class="test-button" onclick="clearResults()" style="background: #dc2626;">Clear Results</button>

        <div id="results" style="margin-top: 20px;"></div>
    </div>

    <script>
        let testResults = [];

        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function testPage(pageName) {
            updateStatus(`Testing ${pageName}...`, 'info');

            // Open the main app in a new window/tab
            const testWindow = window.open('http://localhost:5173', '_blank');

            if (testWindow) {
                // Wait for the page to load, then try to navigate
                setTimeout(() => {
                    try {
                        // Try to access the window to see if it's still available
                        if (!testWindow.closed) {
                            // Simulate navigation by changing the hash or using postMessage
                            testWindow.postMessage({ action: 'navigate', page: pageName }, 'http://localhost:5173');
                            testResults.push({ page: pageName, status: 'success', message: 'Page opened successfully' });
                            updateStatus(`✅ ${pageName} - Page opened successfully`, 'success');
                        } else {
                            testResults.push({ page: pageName, status: 'error', message: 'Window was closed' });
                            updateStatus(`❌ ${pageName} - Window was closed`, 'error');
                        }
                    } catch (error) {
                        testResults.push({ page: pageName, status: 'error', message: error.message });
                        updateStatus(`❌ ${pageName} - Error: ${error.message}`, 'error');
                    }
                    updateResults();
                }, 2000);
            } else {
                testResults.push({ page: pageName, status: 'error', message: 'Failed to open window (popup blocked?)' });
                updateStatus(`❌ ${pageName} - Failed to open window (popup blocked?)`, 'error');
                updateResults();
            }
        }

        function testAllPages() {
            const pages = [
                'dashboard', 'projects', 'campaigns', 'tasks', 'assets', 'users',
                'content-repository', 'service-pages', 'smm-posting', 'on-page-errors',
                'backlink-submission', 'toxic-backlinks', 'ux-issues', 'promotion-repository',
                'competitor-repository', 'competitor-backlinks', 'performance-dashboard',
                'effort-dashboard', 'employee-scorecard', 'employee-comparison',
                'team-leader-dashboard', 'ai-evaluation-engine', 'workload-prediction',
                'reward-penalty', 'kpi-tracking', 'traffic-ranking', 'okr-dashboard'
            ];

            updateStatus('Testing all pages...', 'info');
            testResults = [];

            // Test the main application URL
            fetch('http://localhost:5173')
                .then(response => {
                    if (response.ok) {
                        updateStatus('✅ Frontend server is running and accessible', 'success');
                        testResults.push({ page: 'Frontend Server', status: 'success', message: 'Server is running' });
                    } else {
                        updateStatus('❌ Frontend server returned error: ' + response.status, 'error');
                        testResults.push({ page: 'Frontend Server', status: 'error', message: 'Server error: ' + response.status });
                    }
                })
                .catch(error => {
                    updateStatus('❌ Cannot connect to frontend server: ' + error.message, 'error');
                    testResults.push({ page: 'Frontend Server', status: 'error', message: 'Connection failed: ' + error.message });
                })
                .finally(() => {
                    // Test backend server
                    fetch('http://localhost:3003/health')
                        .then(response => response.json())
                        .then(data => {
                            updateStatus('✅ Backend server is running and healthy', 'success');
                            testResults.push({ page: 'Backend Server', status: 'success', message: 'Server is healthy' });
                        })
                        .catch(error => {
                            updateStatus('❌ Backend server health check failed: ' + error.message, 'error');
                            testResults.push({ page: 'Backend Server', status: 'error', message: 'Health check failed: ' + error.message });
                        })
                        .finally(() => {
                            updateResults();
                        });
                });
        }

        function clearResults() {
            testResults = [];
            updateResults();
            updateStatus('Results cleared', 'info');
        }

        function updateResults() {
            const resultsDiv = document.getElementById('results');
            if (testResults.length === 0) {
                resultsDiv.innerHTML = '';
                return;
            }

            let html = '<h3>Test Results:</h3>';
            testResults.forEach(result => {
                const statusClass = result.status === 'success' ? 'success' : 'error';
                const icon = result.status === 'success' ? '✅' : '❌';
                html += `<div class="status ${statusClass}">${icon} <strong>${result.page}:</strong> ${result.message}</div>`;
            });

            const successCount = testResults.filter(r => r.status === 'success').length;
            const totalCount = testResults.length;
            html += `<div class="status info"><strong>Summary:</strong> ${successCount}/${totalCount} tests passed</div>`;

            resultsDiv.innerHTML = html;
        }

        // Listen for messages from the main app
        window.addEventListener('message', function (event) {
            if (event.origin !== 'http://localhost:5173') return;

            if (event.data.type === 'navigation-result') {
                const result = event.data;
                testResults.push({
                    page: result.page,
                    status: result.success ? 'success' : 'error',
                    message: result.message
                });
                updateResults();
            }
        });

        // Initial status
        updateStatus('Ready to test pages. Make sure the development server is running on http://localhost:5173', 'info');
    </script>
</body>

</html>