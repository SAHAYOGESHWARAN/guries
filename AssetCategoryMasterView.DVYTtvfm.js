import{r as n,j as e,u as S}from"./index.Cgn8UqAd.js";import{T as A}from"./Table.qlFSYBMu.js";import{M as k}from"./Modal.Dm3XWcYn.js";import{e as D}from"./csvHelper.D2kXyc6K.js";import"./index.Cjd9_PBs.js";const B=["Pubrica","Stats work","Food Research lab","PhD assistance","tutors India"],P=({isOpen:c,onClose:d,onSave:i,editingCategory:l})=>{const[a,o]=n.useState({brand:"Pubrica",category_name:"",word_count:0,status:"active"});n.useEffect(()=>{o(l||{brand:"Pubrica",category_name:"",word_count:0,status:"active"})},[l,c]);const u=()=>{if(!a.category_name||!a.category_name.trim()){alert("Category name is required");return}i({...a,word_count:a.word_count||0,status:a.status||"active"}),d()};return e.jsx(k,{isOpen:c,onClose:d,title:l?"Edit Asset Category":"Add Asset Category",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brand ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:a.brand,onChange:s=>o({...a,brand:s.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:B.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Asset Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.category_name||"",onChange:s=>o({...a,category_name:s.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"e.g. Research Articles"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Count"}),e.jsx("input",{type:"number",value:a.word_count||0,onChange:s=>o({...a,word_count:parseInt(s.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"e.g. 500",min:0})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:u,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 font-medium",children:"Submit"})})]})})},E=["Pubrica","Stats work","Food Research lab","PhD assistance","tutors India"],T=()=>{const{data:c=[],create:d,update:i,remove:l,refresh:a}=S("asset-category-master"),[o,u]=n.useState(""),[s,p]=n.useState("All Brands"),[f,m]=n.useState(!1),[x,g]=n.useState(null),[I,b]=n.useState({brand:"Pubrica",category_name:"",word_count:0,status:"active"}),h=c.filter(t=>{const r=t.category_name.toLowerCase().includes(o.toLowerCase()),C=s==="All Brands"||t.brand===s;return r&&C}),y=t=>{let r="bg-gray-100 text-gray-800";return t==="active"?r="bg-green-100 text-green-800":t==="inactive"&&(r="bg-red-100 text-red-800"),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${r}`,children:t})},j=t=>{const r={Pubrica:"bg-blue-100 text-blue-800","Stats work":"bg-purple-100 text-purple-800","Food Research lab":"bg-green-100 text-green-800","PhD assistance":"bg-orange-100 text-orange-800","tutors India":"bg-pink-100 text-pink-800"};return e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${r[t]||"bg-gray-100 text-gray-800"}`,children:t})},w=t=>{g(t),b(t),m(!0)},v=async t=>{confirm("Delete this asset category?")&&await l(t)},N=()=>{D(h,"asset_category_master_export")},_=[{header:"Brand",accessor:t=>j(t.brand),className:"font-bold"},{header:"Asset Category Name",accessor:"category_name",className:"font-bold text-slate-800"},{header:"Word Count",accessor:"word_count",className:"text-center font-mono text-slate-600"},{header:"Status",accessor:t=>y(t.status)},{header:"Updated",accessor:t=>t.updated_at?new Date(t.updated_at).toLocaleDateString():"-",className:"text-xs text-slate-500"},{header:"Actions",accessor:t=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(t),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>v(t.id),className:"text-red-600 hover:text-red-800",children:"Del"})]})}];return e.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Asset Category Master"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Configure asset categories by brand with word count specifications."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:N,className:"bg-white text-slate-600 border border-slate-300 px-4 py-2 rounded-lg font-medium text-sm hover:bg-slate-50 shadow-sm transition-colors",children:"Export"}),e.jsx("button",{onClick:()=>{g(null),b({brand:"Pubrica",category_name:"",word_count:0,status:"active"}),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium text-sm hover:bg-blue-700 shadow-sm",children:"Add Asset Category"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("input",{type:"search",className:"block w-full p-2.5 border border-gray-300 rounded-lg",placeholder:"Search categories...",value:o,onChange:t=>u(t.target.value)}),e.jsxs("select",{value:s,onChange:t=>p(t.target.value),className:"bg-slate-50 border border-slate-300 text-sm rounded-lg p-2.5 min-w-[200px]",children:[e.jsx("option",{children:"All Brands"}),E.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx(A,{columns:_,data:h,title:"Asset Category Registry"}),e.jsx(P,{isOpen:f,onClose:()=>{m(!1),g(null)},editingCategory:x,onSave:async t=>{const r={...t,word_count:t.word_count||0,status:t.status||"active",updated_at:new Date().toISOString()};x?await i(x.id,r):await d(r),await a()}})]})};export{T as default};
