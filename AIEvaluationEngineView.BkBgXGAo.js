import{r,j as e}from"./index.Cgn8UqAd.js";import{c as z,X as $,P as F,a as O,T as U}from"./x.BiCs_uOD.js";import{C as Q}from"./circle-alert.CZRafKvQ.js";import{D as V}from"./download.io5_EtDe.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],H=z("lightbulb",G),J=["This Month","Last Month","This Quarter","Last Quarter","This Year"],X=["Completed","In Progress","Pending","Failed"];function Y({report:n,onClose:p,onSave:w}){const[l,j]=r.useState("basics"),[i,o]=r.useState({report_id:"",evaluation_period:"This Month",total_records:0,status:"Completed"}),[f,y]=r.useState([]),[g,S]=r.useState([]),[x,_]=r.useState([]),[m,R]=r.useState([]),[h,k]=r.useState([]),[v,d]=r.useState(!1),[N,t]=r.useState("");r.useEffect(()=>{n&&(o(n),c(n.report_id))},[n]);const c=async s=>{try{d(!0);const[a,b,E,C,T]=await Promise.all([fetch(`/api/ai-evaluation-engine/reports/${s}/data-sources`),fetch(`/api/ai-evaluation-engine/reports/${s}/performance-scores`),fetch(`/api/ai-evaluation-engine/reports/${s}/risk-factors`),fetch(`/api/ai-evaluation-engine/reports/${s}/opportunities`),fetch(`/api/ai-evaluation-engine/reports/${s}/recommendations`)]),[D,A,I,M,L]=await Promise.all([a.json(),b.json(),E.json(),C.json(),T.json()]);y(D),S(A),_(I),R(M),k(L)}catch(a){console.error("Error fetching report details:",a),t("Failed to load report details")}finally{d(!1)}},u=s=>{const{name:a,value:b,type:E}=s.target;o(C=>({...C,[a]:E==="number"?parseInt(b)||0:b}))},P=async()=>{try{d(!0),t("");const s=n?"PUT":"POST",a=n?`/api/ai-evaluation-engine/reports/${i.report_id}`:"/api/ai-evaluation-engine/reports";if(!(await fetch(a,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Failed to save report");w()}catch(s){t(s.message||"Failed to save report")}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:n?"Edit Evaluation Report":"Create Evaluation Report"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Manage AI evaluation data and insights"})]}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-blue-500 rounded transition",children:e.jsx($,{size:24})})]}),e.jsx("div",{className:"border-b bg-gray-50 sticky top-16 z-40",children:e.jsx("div",{className:"flex gap-0",children:["basics","sources","performance","risks","opportunities","recommendations"].map(s=>e.jsx("button",{onClick:()=>j(s),className:`px-6 py-3 font-medium transition ${l===s?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})}),e.jsxs("div",{className:"p-6",children:[N&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:N}),l==="basics"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Report ID *"}),e.jsx("input",{type:"text",name:"report_id",value:i.report_id,onChange:u,disabled:!!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",placeholder:"RPT-2024-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Evaluation Period"}),e.jsx("select",{name:"evaluation_period",value:i.evaluation_period,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:J.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Records"}),e.jsx("input",{type:"number",name:"total_records",value:i.total_records,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{name:"status",value:i.status,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:X.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})]}),l==="sources"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Data Sources:"})," ",f.length," sources configured"]})}),f.map((s,a)=>e.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.source_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Records: ",s.record_count]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:s.status})]})},a))]}),l==="performance"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Performance Metrics:"})," ",g.length," metrics tracked"]})}),g.map((s,a)=>e.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.metric_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Trend: ",s.trend]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.score}),e.jsx("p",{className:"text-xs text-gray-600",children:"/100"})]})]})},a))]}),l==="risks"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Risk Factors:"})," ",x.length," risks identified"]})}),x.map((s,a)=>e.jsx("div",{className:"border border-red-300 rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Q,{className:"text-red-600 flex-shrink-0 mt-1",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.risk_factor}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.severity==="High"?"bg-red-200 text-red-800":s.severity==="Medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:s.severity}),e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-200 text-gray-800",children:[s.impact_percentage,"% Impact"]})]})]})]})},a))]}),l==="opportunities"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Improvement Opportunities:"})," ",m.length," opportunities identified"]})}),m.map((s,a)=>e.jsx("div",{className:"border border-yellow-300 rounded-lg p-4 bg-yellow-50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(H,{className:"text-yellow-600 flex-shrink-0 mt-1",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.opportunity_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-200 text-blue-800",children:[s.priority," Priority"]}),e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-200 text-green-800",children:[s.potential_impact,"% Impact"]})]})]})]})},a))]}),l==="recommendations"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:e.jsxs("p",{className:"text-sm text-purple-800",children:[e.jsx("strong",{children:"Recommendations:"})," ",h.length," recommendations provided"]})}),h.map((s,a)=>e.jsxs("div",{className:"border border-purple-300 rounded-lg p-4 bg-purple-50",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.recommendation_text}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.category}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-200 text-blue-800",children:[s.priority," Priority"]}),e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-200 text-green-800",children:[s.estimated_impact,"% Impact"]})]})]},a))]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t p-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:p,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition font-medium",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50",children:v?"Saving...":"Save Report"})]})]})})}function q({onNavigate:n}){const[p,w]=r.useState([]),[l,j]=r.useState(!0),[i,o]=r.useState(!1),[f,y]=r.useState(null),[g,S]=r.useState(""),[x,_]=r.useState("all");r.useEffect(()=>{m()},[]);const m=async()=>{try{j(!0);const c=await(await fetch("/api/ai-evaluation-engine/reports")).json();w(c)}catch(t){console.error("Error fetching reports:",t)}finally{j(!1)}},R=()=>{y(null),o(!0)},h=t=>{y(t),o(!0)},k=async t=>{if(window.confirm("Are you sure you want to delete this report?"))try{await fetch(`/api/ai-evaluation-engine/reports/${t}`,{method:"DELETE"}),m()}catch(c){console.error("Error deleting report:",c)}},v=()=>{m(),o(!1)},d=p.filter(t=>{const c=t.report_id.toLowerCase().includes(g.toLowerCase()),u=x==="all"||t.evaluation_period===x;return c&&u}),N=[...new Set(p.map(t=>t.evaluation_period))];return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Automatic Evaluation Engine"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and manage AI-powered performance evaluations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:[e.jsx(V,{size:20}),"Export"]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(F,{size:20}),"New Report"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",placeholder:"Search by report ID...",value:g,onChange:t=>S(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("select",{value:x,onChange:t=>_(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Periods"}),N.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"Loading reports..."}):d.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No reports found"}):d.map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.report_id}),e.jsx("p",{className:"text-sm text-gray-600",children:t.evaluation_period})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>k(t.report_id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:e.jsx(U,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.total_records})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="Completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(t.evaluation_date).toLocaleDateString()})]})]}),e.jsx("button",{onClick:()=>h(t),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition font-medium text-sm",children:"View Details"})]},t.report_id))}),i&&e.jsx(Y,{report:f,onClose:()=>o(!1),onSave:v})]})})}function ee({onNavigate:n}){return e.jsx(q,{onNavigate:n})}export{ee as default};
