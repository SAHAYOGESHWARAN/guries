import{j as e,u as C,r as n,S as k}from"./index.Cgn8UqAd.js";import{g as _}from"./gemini.CcsfAiQp.js";function G({columns:i,data:o,statusAccessor:c,renderCard:x,onStatusChange:d,title:t}){return e.jsxs("div",{className:"h-full flex flex-col",children:[t&&e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:t}),e.jsx("div",{className:"flex-1 flex overflow-x-auto space-x-4 pb-4",children:i.map(l=>{const r=o.filter(a=>c(a)===l.id);return e.jsxs("div",{className:"flex-shrink-0 w-80 bg-gray-100 rounded-lg flex flex-col max-h-full",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex justify-between items-center bg-gray-200 rounded-t-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-700 uppercase text-xs tracking-wider",children:l.title}),e.jsx("span",{className:"bg-gray-300 text-gray-600 text-xs font-bold px-2 py-0.5 rounded-full",children:r.length})]}),e.jsxs("div",{className:"p-2 flex-1 overflow-y-auto space-y-3",children:[r.map(a=>e.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[x(a),d&&e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-100 flex justify-between",children:e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",a.id]})})]},a.id)),r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 text-sm italic",children:"No items"})]})]},l.id)})})]})}const q=()=>{const{data:i,create:o,update:c}=C("graphics"),[x,d]=n.useState("board"),[t,l]=n.useState({graphic_type:"smm_post",platform:"instagram",status:"requested",due_at:""}),[r,a]=n.useState(""),[u,p]=n.useState(null),[h,m]=n.useState(!1),[f,b]=n.useState("1:1"),g=[{id:"requested",title:"Requested"},{id:"in_design",title:"In Design"},{id:"under_qc",title:"Under QC"},{id:"approved",title:"Approved"}],j=async(s,y)=>{await c(s.id,{status:y})},v=async()=>{if(r){m(!0);try{const s=await _(r,f);p(s)}catch{alert("Image generation failed")}finally{m(!1)}}},w=async()=>{await o({...t}),d("board"),l({graphic_type:"smm_post",platform:"instagram",status:"requested",due_at:""}),p(null),a("")},N=s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded uppercase",children:s.platform}),e.jsx("span",{className:"text-[10px] text-slate-400",children:s.due_at})]}),e.jsx("p",{className:"text-sm font-medium text-slate-800 capitalize",children:s.graphic_type.replace("_"," ")})]});return x==="create"?e.jsx("div",{className:"h-full flex flex-col w-full p-6 animate-fade-in",children:e.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden w-full",children:[e.jsxs("div",{className:"border-b border-slate-200 px-8 py-5 flex justify-between items-center bg-slate-50/50 w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"New Graphic Request"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d("board"),className:"px-5 py-2.5 text-sm font-medium text-slate-600 border border-slate-300 rounded-xl hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{onClick:w,className:"bg-blue-600 text-white px-6 py-2.5 rounded-xl font-bold shadow-md hover:bg-blue-700",children:"Submit Request"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50 w-full",children:e.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 w-full",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Asset Type"}),e.jsxs("select",{value:t.graphic_type,onChange:s=>l({...t,graphic_type:s.target.value}),className:"block w-full px-4 py-3 border border-slate-300 rounded-xl",children:[e.jsx("option",{value:"smm_post",children:"SMM Post"}),e.jsx("option",{value:"infographic",children:"Infographic"}),e.jsx("option",{value:"banner",children:"Banner/Ad"}),e.jsx("option",{value:"carousel",children:"Carousel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Platform"}),e.jsxs("select",{value:t.platform,onChange:s=>l({...t,platform:s.target.value}),className:"block w-full px-4 py-3 border border-slate-300 rounded-xl",children:[e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:t.due_at,onChange:s=>l({...t,due_at:s.target.value}),className:"block w-full px-4 py-3 border border-slate-300 rounded-xl"})]})]}),e.jsxs("div",{className:"bg-purple-50 p-8 rounded-2xl border border-purple-100 flex flex-col w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-purple-900 flex items-center",children:[e.jsx(k,{})," ",e.jsx("span",{className:"ml-2",children:"AI Concept Studio (Imagen)"})]}),e.jsxs("select",{value:f,onChange:s=>b(s.target.value),className:"text-xs border-purple-200 rounded-lg p-2 font-medium text-purple-800",children:[e.jsx("option",{value:"1:1",children:"1:1 (Square)"}),e.jsx("option",{value:"16:9",children:"16:9 (Wide)"}),e.jsx("option",{value:"9:16",children:"9:16 (Story)"}),e.jsx("option",{value:"4:3",children:"4:3"}),e.jsx("option",{value:"3:4",children:"3:4"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 w-full",children:[e.jsx("input",{type:"text",value:r,onChange:s=>a(s.target.value),placeholder:"Describe the visual concept...",className:"flex-1 p-3 border border-purple-200 rounded-xl focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{onClick:v,disabled:h,className:"bg-purple-600 text-white px-4 rounded-xl font-bold hover:bg-purple-700 disabled:opacity-50",children:h?"...":"Generate"})]}),e.jsx("div",{className:"flex-1 bg-white rounded-xl border border-purple-100 flex items-center justify-center overflow-hidden min-h-[300px]",children:u?e.jsx("img",{src:u,alt:"Generated Concept",className:"w-full h-full object-contain"}):e.jsx("p",{className:"text-purple-300 text-sm font-bold",children:"Concept Preview Area"})}),u&&e.jsx("p",{className:"text-xs text-purple-600 mt-2 text-center",children:"AI generated concept attached to request."})]})]})})]})}):e.jsxs("div",{className:"h-full flex flex-col w-full p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center flex-shrink-0 w-full mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Graphics Plan"}),e.jsx("button",{onClick:()=>d("create"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold shadow-sm hover:bg-blue-700 transition-colors",children:"+ New Graphic Request"})]}),e.jsx("div",{className:"flex-1 min-h-0 w-full",children:e.jsx(G,{title:"Production Pipeline",columns:g,data:i,statusAccessor:s=>s.status,renderCard:N,onStatusChange:j})})]})};export{q as default};
