import{u as g,r as d,j as e}from"./index.Cgn8UqAd.js";const k=[{key:"All",label:"All"},{key:"Draft",label:"Draft"},{key:"In Progress",label:"In Progress"},{key:"Published",label:"Published"},{key:"Audit Pending",label:"Audit Pending"},{key:"Needs Fix",label:"Needs Fix"},{key:"QC Pending",label:"QC Pending"},{key:"QC Passed",label:"QC Passed"},{key:"Promoted",label:"Promoted"}],I=["Service Page","Sub-Service Page"],B=["Healthcare","Technology","Finance","Education","E-commerce","Manufacturing","Retail","Nutraceuticals"],T=({status:r})=>{const i={Draft:{bg:"bg-slate-100",text:"text-slate-600"},"In Progress":{bg:"bg-indigo-50",text:"text-indigo-700"},Published:{bg:"bg-emerald-50",text:"text-emerald-700"},"Audit Pending":{bg:"bg-amber-50",text:"text-amber-700"},"Needs Fix":{bg:"bg-red-50",text:"text-red-700"},"QC Pending":{bg:"bg-purple-50",text:"text-purple-700"},"QC Passed":{bg:"bg-cyan-50",text:"text-cyan-700"},Promoted:{bg:"bg-green-50",text:"text-green-700"}}[r]||{bg:"bg-slate-100",text:"text-slate-600"};return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${i.bg} ${i.text}`,children:r})},S=({score:r,label:h})=>{if(!r&&r!==0)return e.jsx("span",{className:"text-xs text-slate-400",children:"—"});const i=()=>r>=90?"text-emerald-600 font-bold":r>=70?"text-amber-600 font-bold":"text-red-600 font-bold";return e.jsx("span",{className:`text-sm ${i()}`,children:r})},z=()=>{const{data:r,create:h,refresh:i}=g("servicePages"),{data:m}=g("users"),{data:v}=g("services"),{data:f}=g("subServices"),[c,C]=d.useState(""),[x,P]=d.useState("All"),[L,u]=d.useState(!1),[j,y]=d.useState(!1),[w,N]=d.useState("table"),[s,l]=d.useState({page_title:"",page_type:"Service Page",url_slug:"",service_id:"",sub_service_id:"",industry:"",target_keyword:"",writer_id:"",seo_id:"",developer_id:"",status:"Draft"}),M=t=>t==="All"?r.length:r.filter(a=>a.status===t).length,_=r.filter(t=>{const a=t.page_title?.toLowerCase().includes(c.toLowerCase())||t.url?.toLowerCase().includes(c.toLowerCase())||t.primary_keyword?.toLowerCase().includes(c.toLowerCase()),n=x==="All"||t.status===x;return a&&n}),A=async()=>{if(!s.page_title||!s.page_type){alert("Please fill in required fields");return}y(!0);try{await h({page_title:s.page_title,page_type:s.page_type,url_slug:s.url_slug,url:`/services/${s.url_slug}`,service_id:s.service_id?parseInt(s.service_id):null,sub_service_id:s.sub_service_id?parseInt(s.sub_service_id):null,industry:s.industry||null,target_keyword:s.target_keyword||null,primary_keyword:s.target_keyword||null,writer_id:s.writer_id?parseInt(s.writer_id):null,seo_id:s.seo_id?parseInt(s.seo_id):null,developer_id:s.developer_id?parseInt(s.developer_id):null,status:s.status,seo_score:0,audit_score:0}),u(!1),b(),i()}catch{}finally{y(!1)}},b=()=>{l({page_title:"",page_type:"Service Page",url_slug:"",service_id:"",sub_service_id:"",industry:"",target_keyword:"",writer_id:"",seo_id:"",developer_id:"",status:"Draft"})},D=t=>{if(!t)return"-";const a=new Date(t),o=new Date().getTime()-a.getTime(),p=Math.floor(o/(1e3*60*60*24));return p===0?"Today":p===1?"Yesterday":p<7?`${p} days ago`:a.toLocaleDateString("en-US",{month:"short",day:"2-digit"})},E=()=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Add Service Page"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create a new Service or Sub-Service page entry"})]}),e.jsx("button",{onClick:()=>{u(!1),b()},className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Page Title *"}),e.jsx("input",{type:"text",value:s.page_title,onChange:t=>l({...s,page_title:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Enter page title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Page Type *"}),e.jsx("select",{value:s.page_type,onChange:t=>l({...s,page_type:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:I.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"URL Slug *"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"px-3 py-2 bg-slate-100 border border-r-0 border-slate-300 rounded-l-lg text-sm text-slate-500",children:"/services/"}),e.jsx("input",{type:"text",value:s.url_slug,onChange:t=>l({...s,url_slug:t.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-r-lg focus:ring-2 focus:ring-indigo-500",placeholder:"url-slug"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Service *"}),e.jsxs("select",{value:s.service_id,onChange:t=>l({...s,service_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"",children:"Select service"}),v.map(t=>e.jsx("option",{value:t.id,children:t.service_name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Sub-Service *"}),e.jsxs("select",{value:s.sub_service_id,onChange:t=>l({...s,sub_service_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",disabled:!s.service_id,children:[e.jsx("option",{value:"",children:"Select sub-service"}),f.filter(t=>!s.service_id||Number(t.parent_service_id)===Number(s.service_id)).map(t=>e.jsx("option",{value:t.id,children:t.sub_service_name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Industry *"}),e.jsxs("select",{value:s.industry,onChange:t=>l({...s,industry:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"",children:"Select industry"}),B.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Target Keyword"}),e.jsx("input",{type:"text",value:s.target_keyword,onChange:t=>l({...s,target_keyword:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Primary target keyword..."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Writer"}),e.jsxs("select",{value:s.writer_id,onChange:t=>l({...s,writer_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"Select writer"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"SEO"}),e.jsxs("select",{value:s.seo_id,onChange:t=>l({...s,seo_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"Select SEO"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Developer"}),e.jsxs("select",{value:s.developer_id,onChange:t=>l({...s,developer_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"Select developer"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"Initial Stage *"}),e.jsx("select",{value:s.status,onChange:t=>l({...s,status:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:k.filter(t=>t.key!=="All").map(t=>e.jsx("option",{value:t.key,children:t.label},t.key))})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"* Required fields"})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 bg-slate-50",children:[e.jsx("button",{onClick:()=>{u(!1),b()},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:j||!s.page_title||!s.page_type,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Creating...":"Create Service Page Entry"})]})]})});return e.jsxs("div",{className:"h-full flex flex-col w-full p-6 overflow-hidden bg-slate-50",children:[L&&E(),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Service Page Repository"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Store, monitor, audit, and promote all Service and Sub-Service pages"})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 border border-slate-300 rounded-lg hover:bg-white",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 shadow-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Service Page"]})]})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:c,onChange:t=>C(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"Search by Title, URL, Service, Sub-Service, keyword..."})]}),e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto pb-1",children:[k.map(t=>e.jsxs("button",{onClick:()=>P(t.key),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${x===t.key?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-slate-100"}`,children:[t.label,e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${x===t.key?"bg-indigo-200 text-indigo-800":"bg-slate-200 text-slate-600"}`,children:M(t.key)})]},t.key)),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-200 pl-3",children:[e.jsx("button",{onClick:()=>N("table"),className:`p-2 rounded-lg ${w==="table"?"bg-slate-200 text-slate-800":"text-slate-400 hover:text-slate-600"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded-lg ${w==="grid"?"bg-slate-200 text-slate-800":"text-slate-400 hover:text-slate-600"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})})]})]})]}),e.jsx("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto h-full",children:e.jsxs("table",{className:"w-full min-w-[1300px]",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Page Title"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"URL"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Service → Sub-Service"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"SEO Score"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Audit Score"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Primary Keyword"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Last Audit"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-12 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),e.jsx("p",{className:"text-sm font-medium",children:"No service pages found"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Create a new service page to get started"})]})})}):_.map(t=>{const a=v.find(o=>o.id===t.service_id),n=f.find(o=>o.id===t.sub_service_id);return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:t.page_title}),e.jsx("div",{className:"text-xs text-slate-500",children:t.page_type})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:[t.url,e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-slate-700",children:t.service_name||a?.service_name||"-"}),(t.sub_service_name||n?.sub_service_name)&&e.jsxs("div",{className:"text-xs text-slate-500",children:["→ ",t.sub_service_name||n?.sub_service_name]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(S,{score:t.seo_score})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(S,{score:t.audit_score})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-slate-600",children:t.primary_keyword||t.target_keyword||"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:D(t.last_audit||t.updated_at)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(T,{status:t.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-slate-700",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]},t.id)})})]})})})]})};export{z as default};
