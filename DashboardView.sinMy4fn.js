import{r as c,j as e}from"./index.Cgn8UqAd.js";const u=({label:i,value:n,trend:l,trendType:o="neutral",icon:d,iconBg:h,iconColor:m})=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:i}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:n})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${h}`,children:e.jsx("span",{className:"text-xl",children:d})})]}),l&&e.jsx("p",{className:`text-xs font-medium ${o==="up"?"text-green-600":o==="down"?"text-red-600":"text-slate-600"}`,children:l})]}),T=({onNavigate:i})=>{const[n,l]=c.useState(null),[o,d]=c.useState([]),[h,m]=c.useState([]),[N,v]=c.useState([]),[y,w]=c.useState(!0);c.useEffect(()=>{const s=async()=>{try{w(!0);const x="/api/v1";try{const a=await fetch(`${x}/dashboard/stats`);if(a.ok){const r=await a.json();l(r)}else l({stats:{activeCampaigns:1,activeCampaignsChange:12,contentPublished:2,contentPublishedChange:8,tasksCompleted:3,tasksCompletedChange:-3,teamMembers:5,teamMembersChange:2,pendingTasks:2}})}catch{l({stats:{activeCampaigns:1,activeCampaignsChange:12,contentPublished:2,contentPublishedChange:8,tasksCompleted:3,tasksCompletedChange:-3,teamMembers:5,teamMembersChange:2,pendingTasks:2}})}try{const a=await fetch(`${x}/projects`);if(a.ok){const r=await a.json();d(Array.isArray(r)?r.slice(0,4):[])}else d([{id:1,name:"Website Redesign",status:"In Progress",client:"ABC Corp",deadline:"2024-03-01"},{id:2,name:"Marketing Automation",status:"Planning",client:"XYZ Inc",deadline:"2024-04-01"}])}catch{d([{id:1,name:"Website Redesign",status:"In Progress",client:"ABC Corp",deadline:"2024-03-01"},{id:2,name:"Marketing Automation",status:"Planning",client:"XYZ Inc",deadline:"2024-04-01"}])}try{const a=await fetch(`${x}/tasks`);if(a.ok){const r=await a.json();m(Array.isArray(r)?r.slice(0,4):[])}else m([{id:1,name:"Design Homepage Banner",status:"In Progress",project_id:1},{id:2,name:"Write SEO Article",status:"Completed",project_id:1}])}catch{m([{id:1,name:"Design Homepage Banner",status:"In Progress",project_id:1},{id:2,name:"Write SEO Article",status:"Completed",project_id:1}])}v([{id:1,action:"Asset created",user:"John Designer",time:"2 hours ago"},{id:2,action:"QC review completed",user:"Sarah Writer",time:"4 hours ago"}])}catch{l({stats:{activeCampaigns:1,activeCampaignsChange:12,contentPublished:2,contentPublishedChange:8,tasksCompleted:3,tasksCompletedChange:-3,teamMembers:5,teamMembersChange:2,pendingTasks:2}}),d([{id:1,name:"Website Redesign",status:"In Progress",client:"ABC Corp",deadline:"2024-03-01"},{id:2,name:"Marketing Automation",status:"Planning",client:"XYZ Inc",deadline:"2024-04-01"}]),m([{id:1,name:"Design Homepage Banner",status:"In Progress",project_id:1},{id:2,name:"Write SEO Article",status:"Completed",project_id:1}]),v([{id:1,action:"Asset created",user:"John Designer",time:"2 hours ago"},{id:2,action:"QC review completed",user:"Sarah Writer",time:"4 hours ago"}])}finally{w(!1)}};s();const t=setInterval(s,3e4);return()=>clearInterval(t)},[]);const g=s=>s>0?"up":s<0?"down":"neutral",p=s=>s>0?`+${s}% from last month`:s<0?`${s}% from last month`:"No change from last month",C=s=>{const t=(s||"").toLowerCase();return t.includes("progress")||t==="in progress"?"bg-blue-500":t.includes("pending")||t.includes("qc")?"bg-yellow-500":t.includes("passed")||t.includes("completed")?"bg-green-500":"bg-slate-400"},k=s=>{const t=(s||"").toLowerCase();return t==="high"?"bg-red-100 text-red-700":t==="medium"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"},b=s=>{if(!s)return"N/A";const t=new Date(s),a=new Date().getTime()-t.getTime(),r=Math.floor(a/6e4),f=Math.floor(a/36e5),j=Math.floor(a/864e5);return r<1?"just now":r<60?`${r} minute${r>1?"s":""} ago`:f<24?`${f} hour${f>1?"s":""} ago`:j<7?`${j} day${j>1?"s":""} ago`:t.toLocaleDateString()};return y?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"h-full w-full flex flex-col bg-slate-50 overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-6 flex-shrink-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Search campaigns, tasks, content..."})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 w-full",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(u,{label:"Active Campaigns",value:n?.activeCampaigns||0,trend:p(n?.campaignsTrendPercent||0),trendType:g(n?.campaignsTrendPercent||0),iconBg:"bg-blue-100",iconColor:"text-blue-600",icon:"ðŸŽ¯"}),e.jsx(u,{label:"Content Published",value:n?.contentPublished||0,trend:p(n?.contentTrendPercent||0),trendType:g(n?.contentTrendPercent||0),iconBg:"bg-green-100",iconColor:"text-green-600",icon:"ðŸ“‹"}),e.jsx(u,{label:"Tasks Completed",value:n?.tasksCompleted||0,trend:p(n?.tasksTrendPercent||0),trendType:g(n?.tasksTrendPercent||0),iconBg:"bg-purple-100",iconColor:"text-purple-600",icon:"âœ“"}),e.jsx(u,{label:"Team Members",value:n?.teamMembers||0,trend:"Active team",trendType:"neutral",iconBg:"bg-orange-100",iconColor:"text-orange-600",icon:"ðŸ‘¥"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"border-b border-slate-200 px-8 py-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Recent Projects"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Track your ongoing initiatives"})]}),e.jsx("button",{onClick:()=>i&&i("projects"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"View all â†’"})]}),e.jsx("div",{className:"p-8 space-y-6",children:o.length>0?o.map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${C(s.status)}`}),e.jsx("h4",{className:"font-semibold text-slate-900",children:s.name||s.project_name||`Project ${s.id}`})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.status||"Active"})]}),e.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[s.progress||0,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${(s.progress||0)===100?"bg-green-500":(s.progress||0)>=80?"bg-blue-500":"bg-blue-400"}`,style:{width:`${s.progress||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs font-bold flex items-center justify-center",children:"P"})}),e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:["ðŸ• ",b(s.updated_at)]})]})]},s.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No projects yet"})})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"border-b border-slate-200 px-8 py-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Upcoming Tasks"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"What needs attention"})]}),e.jsx("div",{className:"p-8 space-y-4",children:h.length>0?h.map(s=>e.jsx("div",{className:"pb-4 border-b border-slate-100 last:border-0 last:pb-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.name||s.task_name||`Task ${s.id}`}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:["ðŸ• ",b(s.due_date||s.updated_at)]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold whitespace-nowrap ${k(s.priority)}`,children:s.priority||"normal"})]})},s.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No tasks yet"})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"border-b border-slate-200 px-8 py-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Recent Activity"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Latest updates from your team"})]}),e.jsx("button",{onClick:()=>i&&i("tasks"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"View all â†’"})]}),e.jsx("div",{className:"p-8 space-y-4",children:N.length>0?N.map(s=>e.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b border-slate-100 last:border-0 last:pb-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white text-xs font-bold flex items-center justify-center flex-shrink-0",children:(s.user_name||"U").split(" ").map(t=>t[0]).join("").substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-slate-900",children:[e.jsx("span",{className:"font-semibold",children:s.user_name||"User"})," ",s.action," ",e.jsx("span",{className:"font-semibold",children:s.target||"item"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:b(s.timestamp)})]})]},s.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No recent activity"})})})]})]})})]})};export{T as default};
