import{u as M,r,j as t}from"./index.Cgn8UqAd.js";import{T as R}from"./Table.qlFSYBMu.js";import{M as E}from"./Modal.Dm3XWcYn.js";import{e as P}from"./csvHelper.D2kXyc6K.js";import"./index.Cjd9_PBs.js";const f=["JPG","PNG","SVG","PDF","MP4","MOV","JSON","DOCX","WEBP","GIF","XLSX","PPTX","ZIP"],V=()=>{const{data:h=[],create:b,update:g,remove:y,refresh:j}=M("asset-type-master"),[x,v]=r.useState(""),[n,N]=r.useState("All Formats"),[w,o]=r.useState(!1),[i,d]=r.useState(null),[s,l]=r.useState({asset_type:"",dimension:"",file_formats:[],description:"Optional",platforms_count:0,graphic_status:"linked"}),[c,p]=r.useState(""),u=(h||[]).filter(e=>{const a=(e.asset_type||"").toLowerCase().includes(x.toLowerCase()),m=n==="All Formats"||e.file_formats&&e.file_formats.includes(n);return a&&m}),_=e=>{let a="bg-gray-100 text-gray-800";return e==="Required"?a="bg-red-100 text-red-800":e==="Optional"&&(a="bg-blue-100 text-blue-800"),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${a}`,children:e})},C=e=>{d(e),l(e),o(!0)},k=async e=>{confirm("Delete this asset type?")&&await y(e)},A=async()=>{const e={...s,status:s.status||"active",updated_at:new Date().toISOString()};i?await g(i.id,e):await b(e),await j(),o(!1),d(null),l({asset_type:"",dimension:"",file_formats:[],description:"Optional",platforms_count:0,graphic_status:"linked"})},S=e=>{if(e.key==="Enter"&&c.trim()){e.preventDefault();const a=c.trim().toUpperCase().replace(".","");s.file_formats?.includes(a)||l({...s,file_formats:[...s.file_formats||[],a]}),p("")}},T=e=>{s.file_formats?.includes(e)||l({...s,file_formats:[...s.file_formats||[],e]})},D=e=>{l({...s,file_formats:(s.file_formats||[]).filter(a=>a!==e)})},O=()=>{P(u,"asset_type_master_export")},F=[{header:"Asset Type",accessor:"asset_type",className:"font-bold text-slate-800"},{header:"Dimension",accessor:"dimension",className:"font-mono text-xs text-slate-600"},{header:"Accepted Formats",accessor:e=>t.jsx("div",{className:"flex flex-wrap gap-1",children:e.file_formats&&e.file_formats.length>0?e.file_formats.map((a,m)=>t.jsx("span",{className:"px-1.5 py-0.5 rounded border border-blue-200 bg-blue-50 text-[10px] font-medium text-blue-700 uppercase",children:a},m)):t.jsx("span",{className:"text-gray-400 text-xs italic",children:"Any"})})},{header:"Requirement",accessor:e=>_(e.description)},{header:"Updated",accessor:e=>e.updated_at?new Date(e.updated_at).toLocaleDateString():"-",className:"text-xs text-slate-500"},{header:"Actions",accessor:e=>t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),t.jsx("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-800",children:"Del"})]})}];return t.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Asset Type Master"}),t.jsx("p",{className:"text-slate-500 mt-1",children:"Configure asset definitions and connect allowed file formats."})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:O,className:"bg-white text-slate-600 border border-slate-300 px-4 py-2 rounded-lg font-medium text-sm hover:bg-slate-50 shadow-sm transition-colors",children:"Export"}),t.jsx("button",{onClick:()=>{d(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium text-sm hover:bg-blue-700 shadow-sm",children:"Add Asset Type"})]})]}),t.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col gap-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[t.jsx("input",{type:"search",className:"block w-full p-2.5 border border-gray-300 rounded-lg",placeholder:"Search...",value:x,onChange:e=>v(e.target.value)}),t.jsxs("select",{value:n,onChange:e=>N(e.target.value),className:"bg-slate-50 border border-slate-300 text-sm rounded-lg p-2.5",children:[t.jsx("option",{children:"All Formats"}),f.map(e=>t.jsx("option",{value:e,children:e},e))]})]})}),t.jsx(R,{columns:F,data:u,title:"Asset Configuration Registry"}),t.jsx(E,{isOpen:w,onClose:()=>o(!1),title:i?"Edit Asset Type":"Add Asset Type",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Asset Type Name"}),t.jsx("input",{type:"text",value:s.asset_type,onChange:e=>l({...s,asset_type:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"e.g. Blog Banner"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Recommended Dimension"}),t.jsx("input",{type:"text",value:s.dimension,onChange:e=>l({...s,dimension:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"e.g. 1200x628"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connect Accepted Formats"}),t.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-gray-300 rounded-md bg-white min-h-[42px] focus-within:ring-2 focus-within:ring-blue-500",children:[s.file_formats?.map((e,a)=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[e,t.jsx("button",{type:"button",onClick:()=>D(e),className:"ml-1 text-blue-600 hover:text-blue-800 font-bold",children:"Ã—"})]},a)),t.jsx("input",{type:"text",value:c,onChange:e=>p(e.target.value),onKeyDown:S,className:"flex-1 outline-none bg-transparent text-sm min-w-[60px]",placeholder:"Type format & enter..."})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Quick Add:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:f.map(e=>t.jsx("button",{type:"button",onClick:()=>T(e),className:`text-xs px-2 py-0.5 rounded transition-colors ${s.file_formats?.includes(e)?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e},e))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirement Level"}),t.jsxs("select",{value:s.description,onChange:e=>l({...s,description:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[t.jsx("option",{value:"Required",children:"Required"}),t.jsx("option",{value:"Optional",children:"Optional"}),t.jsx("option",{value:"Not Required",children:"Not Required"})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Save Configuration"})})]})})]})};export{V as default};
