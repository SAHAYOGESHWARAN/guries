import{u as m,r,j as s,f as M,h as T,G as $}from"./index.Cgn8UqAd.js";import{M as O}from"./Modal.Dm3XWcYn.js";import"./index.Cjd9_PBs.js";const H=()=>{const{data:u,update:n}=m("integrations"),{data:g,create:f}=m("logs"),a=u,[b,c]=r.useState({open:!1,integrationId:null}),[i,x]=r.useState({}),[o,p]=r.useState("all"),[y,j]=r.useState({syncFrequency:"daily",healthThresholds:{maxLatency:500,alertOnFailure:!0},apiKeyMetadata:{lastRotated:"2023-10-01",status:"active"}}),v=e=>{switch(e){case"google":return s.jsx($,{});case"semrush":return s.jsx(T,{});case"ahrefs":return s.jsx(M,{});default:return s.jsx("div",{className:"text-xl",children:"ðŸ”Œ"})}},w=e=>e>=90?"bg-green-500":e>=70?"bg-yellow-500":"bg-red-500",N=e=>e?(new Date().getTime()-new Date(e).getTime())/(1e3*3600*24)>90:!1,S=(e,t)=>e>t?"text-red-600":e>t*.8?"text-yellow-600":"text-green-600",l={},C=e=>{const t=a.find(d=>d.id===e);t?.connected?(c({open:!0,integrationId:e}),j(t.config||y)):n(e,{connected:!0,healthScore:100,syncStatus:"success"})},I=async e=>{x(t=>({...t,[e]:!0})),await n(e,{syncStatus:"syncing"}),setTimeout(async()=>{x(t=>({...t,[e]:!1})),await n(e,{syncStatus:"success",lastSyncTime:new Date().toISOString()}),f({integration_id:e,event:"Manual Sync Completed",status:"success",timestamp:new Date().toISOString()})},2e3)},h=g.filter(e=>o==="all"||e.integration_id===o);return s.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Connectivity Hub"}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center bg-white px-3 py-1.5 rounded-full border border-gray-200 shadow-sm",children:[s.jsxs("span",{className:"relative flex h-2.5 w-2.5 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"})]}),"System Status: ",s.jsx("span",{className:"font-bold text-green-600 ml-1",children:"OPERATIONAL"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(e=>{const t=N(e.config?.apiKeyMetadata?.lastRotated),d=l[e.id]>(e.config?.healthThresholds?.maxLatency||500),L=e.connected&&(t||d);return s.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-md flex flex-col relative hover:shadow-lg transition-all border-2 ${L?"border-red-100 ring-1 ring-red-100":"border-transparent"}`,children:[e.connected&&s.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end space-y-1",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-full px-2 py-1 border border-gray-200",children:[s.jsx("span",{className:`text-xs font-mono font-bold ${S(l[e.id]||0,e.config?.healthThresholds?.maxLatency||500)}`,children:l[e.id]?`${l[e.id]}ms`:"OK"}),s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${l[e.id]>(e.config?.healthThresholds?.maxLatency||500)?"bg-red-500":"bg-green-500"}`})]})}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center mr-4 bg-gray-50 rounded-full border border-gray-100 shadow-sm",children:v(e.icon)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:e.name}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("p",{className:`text-xs font-semibold ${e.connected?"text-green-600":"text-gray-400"}`,children:e.connected?"Connected":"Disconnected"})})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 flex-grow leading-relaxed",children:e.description}),e.connected&&s.jsx("div",{className:"mb-4 space-y-3",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Health Score"}),s.jsxs("span",{className:"font-bold text-gray-700",children:[e.healthScore,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${w(e.healthScore)}`,style:{width:`${e.healthScore}%`}})})]})}),s.jsxs("div",{className:"flex space-x-2 mt-auto pt-2",children:[s.jsx("button",{onClick:()=>C(e.id),className:`flex-1 py-2 rounded-md text-sm font-semibold transition-all ${e.connected?"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50":"bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg"}`,children:e.connected?"Configure":"Connect Integration"}),e.connected&&s.jsx("button",{onClick:()=>I(e.id),disabled:i[e.id],className:"px-3 py-2 bg-blue-50 text-blue-600 border border-blue-100 rounded-md hover:bg-blue-100 disabled:opacity-50 transition-colors",title:"Force Sync Now",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${i[e.id]?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]},e.id)}):s.jsx("div",{className:"col-span-full p-8 text-center text-gray-500 bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl",children:"No integrations configured. Use the Admin Console to add providers."})}),s.jsxs("div",{className:"bg-gray-900 text-gray-300 rounded-lg p-6 shadow-inner font-mono text-sm border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-gray-100 font-bold flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})}),"Live Event Stream"]}),s.jsxs("select",{value:o,onChange:e=>p(e.target.value),className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs rounded px-2 py-1 focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Sources"}),a.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900 pr-2",children:h.length>0?h.map(e=>s.jsxs("div",{className:"flex space-x-4 border-b border-gray-800 pb-1 last:border-0 hover:bg-gray-800/50 px-2 py-1 rounded transition-colors",children:[s.jsx("span",{className:"text-gray-500 w-24 flex-shrink-0 text-xs pt-0.5",children:e.timestamp}),s.jsxs("span",{className:`flex-1 text-xs font-bold ${e.status==="error"?"text-red-400":"text-green-400"}`,children:["[",e.status.toUpperCase(),"]"]}),s.jsx("span",{className:"flex-1 text-blue-300",children:a.find(t=>t.id===e.integration_id)?.name||e.integration_id}),s.jsx("span",{className:"flex-[2] text-white",children:e.event})]},e.id)):s.jsx("div",{className:"text-gray-600 italic text-center py-4",children:"No logs found for selected filter."})})]}),s.jsx(O,{isOpen:b.open,onClose:()=>c({open:!1,integrationId:null}),title:"Integration Settings",children:s.jsx("div",{className:"p-4 text-center text-slate-500 italic",children:"Configuration options coming soon..."})})]})};export{H as default};
