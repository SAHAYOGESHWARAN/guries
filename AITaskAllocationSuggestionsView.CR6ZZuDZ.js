import{r as n,j as e}from"./index.Cgn8UqAd.js";const x=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),j=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),k=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),C=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),S=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),A=({className:r="w-5 h-5"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),L=({onNavigate:r})=>{const[a,m]=n.useState([]),[f,h]=n.useState(!0),[l,o]=n.useState({status:"all",priority:"all",minConfidence:0}),[M,T]=n.useState(null),[U,u]=n.useState(!1);n.useEffect(()=>{c()},[l]);const c=async()=>{try{h(!0);const s="/api/v1",t=new URLSearchParams;l.status!=="all"&&t.append("status",l.status),l.priority!=="all"&&t.append("priority",l.priority),t.append("minConfidence",l.minConfidence.toString());const d=await(await fetch(`${s}/workload-allocation/task-suggestions?${t}`)).json();m(Array.isArray(d)?d:d.data||[])}catch(s){console.error("Error fetching suggestions:",s),m([])}finally{h(!1)}},b=async s=>{try{(await fetch(`/api/v1/workload-allocation/task-suggestions/${s}/accept`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok&&(c(),u(!1))}catch(t){console.error("Error accepting suggestion:",t)}},v=async s=>{try{(await fetch(`/api/v1/workload-allocation/task-suggestions/${s}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok&&(c(),u(!1))}catch(t){console.error("Error rejecting suggestion:",t)}},w=s=>s>=85?"text-emerald-600 bg-emerald-100":s>=70?"text-blue-600 bg-blue-100":s>=50?"text-amber-600 bg-amber-100":"text-red-600 bg-red-100",N=s=>{switch(s.toLowerCase()){case"high":return"bg-red-100 text-red-800 border-red-300";case"medium":return"bg-amber-100 text-amber-800 border-amber-300";case"low":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-slate-100 text-slate-800 border-slate-300"}},y=s=>{switch(s){case"Suggested":return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:"Suggested"});case"Accepted":return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800",children:"Accepted"});case"Rejected":return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Rejected"});default:return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-slate-100 text-slate-800",children:s})}},p=a.filter(s=>!(l.status!=="all"&&s.status!==l.status||l.priority!=="all"&&s.priority!==l.priority||s.confidence_score<l.minConfidence)),i={total:a.length,accepted:a.filter(s=>s.status==="Accepted").length,pending:a.filter(s=>s.status==="Suggested").length,avgConfidence:a.length>0?(a.reduce((s,t)=>s+t.confidence_score,0)/a.length).toFixed(1):0};return f?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"h-full w-full flex flex-col overflow-hidden bg-slate-50",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-slate-300",children:e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"AI Task Allocation Suggestions"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"AI-powered task allocation recommendations based on employee capacity, skills, and workload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Total Suggestions"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:i.total})]}),e.jsx(x,{className:"w-8 h-8 text-indigo-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:i.pending})]}),e.jsx(A,{className:"w-8 h-8 text-amber-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:i.accepted})]}),e.jsx(j,{className:"w-8 h-8 text-emerald-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Avg Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[i.avgConfidence,"%"]})]}),e.jsx(S,{className:"w-8 h-8 text-blue-500 opacity-20"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:s=>o(t=>({...t,status:s.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Suggested",children:"Suggested"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Priority"}),e.jsxs("select",{value:l.priority,onChange:s=>o(t=>({...t,priority:s.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Min Confidence"}),e.jsx("input",{type:"range",min:"0",max:"100",value:l.minConfidence,onChange:s=>o(t=>({...t,minConfidence:parseInt(s.target.value)})),className:"w-full"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[l.minConfidence,"%"]})]})]})}),e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-8 text-center",children:[e.jsx(x,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No suggestions match your filters"})]}):p.map(s=>e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 hover:border-blue-300 transition-colors p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:s.task_name}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:s.allocation_reason})]}),y(s.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-600",children:"Task Type"}),e.jsx("p",{className:"font-medium text-slate-900",children:s.task_type})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-600",children:"Priority"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded border ${N(s.priority)}`,children:s.priority})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-600",children:"Est. Hours"}),e.jsxs("p",{className:"font-medium text-slate-900",children:[s.estimated_hours,"h"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-600",children:"Confidence"}),e.jsxs("p",{className:`font-medium px-2 py-1 rounded text-xs ${w(s.confidence_score)}`,children:[s.confidence_score,"%"]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[e.jsx(C,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{className:"text-slate-700",children:["Suggested for: ",e.jsx("span",{className:"font-semibold",children:s.suggested_assignee_name})]})]})]}),s.status==="Suggested"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b(s.id),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Accept"]}),e.jsxs("button",{onClick:()=>v(s.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Reject"]})]})]})},s.id))})]})})})},P=({onNavigate:r})=>e.jsx(L,{onNavigate:r});export{P as default};
