import{u as T,r as n,j as e,g as A}from"./index.Cgn8UqAd.js";import{T as M}from"./Table.qlFSYBMu.js";import{M as E}from"./Modal.Dm3XWcYn.js";import{p as I,e as L}from"./csvHelper.D2kXyc6K.js";import"./index.Cjd9_PBs.js";const O=()=>{const{data:f,create:u,update:b,remove:y}=T("effortTargets"),[s,h]=n.useState({department:"All",status:"All"}),[m,v]=n.useState(""),[j,d]=n.useState(!1),[x,g]=n.useState(null),[a,r]=n.useState({department:"",role:"",kpi_category:"",effort_metric:"",monthly_target:0,weekly_target:0,daily_target:0,max_capacity:0,weightage_percent:0,status:"Draft"}),c=n.useRef(null),p=f.filter(t=>{const l=t.role.toLowerCase().includes(m.toLowerCase())||t.effort_metric.toLowerCase().includes(m.toLowerCase()),o=s.status==="All"||t.status===s.status,i=s.department==="All"||t.department===s.department;return l&&o&&i}),w=t=>{g(t),r(t),d(!0)},k=async t=>{confirm("Are you sure you want to delete this target configuration?")&&await y(t)},N=async()=>{x?await b(x.id,a):await u(a),d(!1),g(null),r({department:"",role:"",kpi_category:"",effort_metric:"",monthly_target:0,weekly_target:0,daily_target:0,max_capacity:0,weightage_percent:0,status:"Draft"})},_=()=>{L(p,"effort_targets_export")},C=()=>{c.current?.click()},D=async t=>{if(t.target.files&&t.target.files[0]){try{const l=await I(t.target.files[0]);let o=0;for(const i of l)i.role&&i.effort_metric&&(await u(i),o++);alert(`Successfully imported ${o} targets.`)}catch{alert("Error parsing CSV file.")}c.current&&(c.current.value="")}},S=[{header:"Role",accessor:"role",className:"font-bold text-slate-700"},{header:"Department",accessor:"department"},{header:"KPI Category",accessor:"kpi_category"},{header:"Effort Metric",accessor:"effort_metric"},{header:"Monthly Target",accessor:"monthly_target",className:"text-right font-mono"},{header:"Weekly Target",accessor:"weekly_target",className:"text-right font-mono text-slate-500"},{header:"Daily Target",accessor:"daily_target",className:"text-right font-mono text-slate-500"},{header:"Weightage %",accessor:t=>{const l=t.weightage_percent;let o="bg-blue-100 text-blue-800";return l>=40?o="bg-purple-100 text-purple-800 font-bold":l<25&&(o="bg-gray-100 text-gray-600"),e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${o}`,children:[l,"%"]})}},{header:"Max Tasks/Day",accessor:"max_tasks_per_day",className:"text-center"},{header:"Status",accessor:t=>A(t.status)},{header:"Updated",accessor:"updated_at",className:"text-xs text-slate-400"},{header:"Actions",accessor:t=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(t),className:"text-blue-600 hover:text-blue-800",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>k(t.id),className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}];return e.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Effort Target Configuration"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Define role-based effort targets that drive workload prediction, task assignment, and performance analytics"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{className:"bg-indigo-50 text-indigo-700 border border-indigo-200 px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-100 transition-colors flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Alignment Engine"]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Department"}),e.jsxs("select",{value:s.department,onChange:t=>h({...s,department:t.target.value}),className:"bg-slate-50 border border-slate-200 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-40 p-2",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Content"}),e.jsx("option",{children:"SEO"}),e.jsx("option",{children:"SMM"}),e.jsx("option",{children:"Development"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Status"}),e.jsxs("select",{value:s.status,onChange:t=>h({...s,status:t.target.value}),className:"bg-slate-50 border border-slate-200 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-32 p-2",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"relative flex-1 md:w-64",children:e.jsx("input",{type:"search",className:"block w-full p-2.5 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Search role or metric...",value:m,onChange:t=>v(t.target.value)})}),e.jsx("input",{type:"file",ref:c,onChange:D,accept:".csv",style:{display:"none"}}),e.jsx("button",{onClick:C,className:"text-slate-600 hover:text-indigo-600 border border-slate-300 px-3 py-2 rounded-lg text-sm font-medium",children:"Import"}),e.jsx("button",{onClick:_,className:"text-slate-600 hover:text-indigo-600 border border-slate-300 px-3 py-2 rounded-lg text-sm font-medium",children:"Export"}),e.jsx("button",{onClick:()=>{g(null),r({department:"",role:"",kpi_category:"",effort_metric:"",monthly_target:0,weekly_target:0,daily_target:0,max_capacity:0,weightage_percent:0,status:"Draft"}),d(!0)},className:"bg-blue-600 text-white px-4 py-2.5 rounded-lg font-medium text-sm hover:bg-blue-700 shadow-sm transition-colors flex items-center whitespace-nowrap",children:"+ Add New Target"})]})]}),e.jsx(M,{columns:S,data:p,title:"Active Targets"}),e.jsx(E,{isOpen:j,onClose:()=>d(!1),title:x?"Edit Effort Target":"Add New Effort Target",children:e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsx("input",{type:"text",value:a.department,onChange:t=>r({...a,department:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsx("input",{type:"text",value:a.role,onChange:t=>r({...a,role:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"KPI Category"}),e.jsx("input",{type:"text",value:a.kpi_category,onChange:t=>r({...a,kpi_category:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Effort Metric"}),e.jsx("input",{type:"text",value:a.effort_metric,onChange:t=>r({...a,effort_metric:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Monthly Target"}),e.jsx("input",{type:"number",value:a.monthly_target,onChange:t=>r({...a,monthly_target:parseInt(t.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weekly Target"}),e.jsx("input",{type:"number",value:a.weekly_target,onChange:t=>r({...a,weekly_target:parseInt(t.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Daily Target"}),e.jsx("input",{type:"number",value:a.daily_target,onChange:t=>r({...a,daily_target:parseInt(t.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max Capacity"}),e.jsx("input",{type:"number",value:a.max_capacity,onChange:t=>r({...a,max_capacity:parseInt(t.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weightage %"}),e.jsx("input",{type:"number",value:a.weightage_percent,onChange:t=>r({...a,weightage_percent:parseFloat(t.target.value)||0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max Tasks/Day"}),e.jsx("input",{type:"number",value:a.max_tasks_per_day,onChange:t=>r({...a,max_tasks_per_day:parseInt(t.target.value)||5}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>r({...a,status:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[e.jsx("option",{value:"Draft",children:"Draft"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"flex justify-end pt-4 gap-2",children:[e.jsx("button",{onClick:()=>d(!1),className:"border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:N,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Save"})]})]})})]})};export{O as default};
