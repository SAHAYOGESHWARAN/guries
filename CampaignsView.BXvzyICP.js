import{u as j,r as x,j as e}from"./index.Cgn8UqAd.js";const P=({name:a,color:i,size:n="md"})=>{const r=a.split(" ").map(d=>d[0]).join("").substring(0,2).toUpperCase(),o=["bg-indigo-500","bg-emerald-500","bg-amber-500","bg-rose-500","bg-cyan-500","bg-violet-500","bg-pink-500"],g=i||o[a.length%o.length],p=n==="sm"?"w-6 h-6 text-[10px]":"w-8 h-8 text-xs";return e.jsx("div",{className:`${p} rounded-full flex items-center justify-center text-white font-bold ${g}`,children:r})},I=({type:a})=>{const n={Content:{bg:"text-purple-600",text:"Content"},SEO:{bg:"text-emerald-600",text:"SEO"},SMM:{bg:"text-pink-600",text:"SMM"},Web:{bg:"text-indigo-600",text:"Web"},Analytics:{bg:"text-cyan-600",text:"Analytics"}}[a]||{bg:"text-slate-600",text:a};return e.jsx("span",{className:`text-xs font-bold ${n.bg}`,children:n.text})},T=({status:a})=>{const n={active:{bg:"bg-indigo-50 text-indigo-700",text:"In Progress",label:"In Progress"},in_progress:{bg:"bg-indigo-50 text-indigo-700",text:"In Progress",label:"In Progress"},completed:{bg:"bg-emerald-50 text-emerald-700",text:"Completed",label:"Completed"},planning:{bg:"bg-slate-100 text-slate-600",text:"Planned",label:"Planned"},planned:{bg:"bg-slate-100 text-slate-600",text:"Planned",label:"Planned"},on_hold:{bg:"bg-amber-50 text-amber-700",text:"On-Hold",label:"On-Hold"}}[a?.toLowerCase()]||{bg:"bg-slate-100 text-slate-600",label:a};return e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${n.bg}`,children:n.label})},O=({name:a})=>e.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:a}),W=({campaign:a,owner:i,onClick:n})=>{const r=a.progress||(a.tasks_total&&a.tasks_total>0?Math.round((a.tasks_completed||0)/a.tasks_total*100):Math.floor(Math.random()*70)+20),o=a.tasks_completed||Math.floor(Math.random()*15)+3,g=a.tasks_total||o+Math.floor(Math.random()*10)+5,p=a.kpi_score||Math.floor(Math.random()*30)+70,d=a.sub_campaigns?typeof a.sub_campaigns=="string"?JSON.parse(a.sub_campaigns):a.sub_campaigns:["Blog Posts","Whitepapers","Infographics"].slice(0,Math.floor(Math.random()*3)+1),u=m=>m?new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"):"";return e.jsxs("div",{onClick:n,className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-lg hover:border-indigo-200 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx(I,{type:a.campaign_type||"Content"}),e.jsx(T,{status:a.campaign_status||a.status||"active"})]}),e.jsx("h3",{className:"font-bold text-slate-900 text-base mb-2 leading-tight",children:a.campaign_name}),i&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(P,{name:i.name,size:"sm"}),e.jsx("span",{className:"text-sm text-slate-600",children:i.name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase font-medium mb-1",children:"SUB-CAMPAIGNS"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,3).map((m,h)=>e.jsx(O,{name:m},h))})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-3",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:[u(a.campaign_start_date||a.start_date)," â†’ ",u(a.campaign_end_date||a.end_date)]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-slate-400 uppercase font-medium",children:"PROGRESS"}),e.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[r,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${r>=80?"bg-emerald-500":r>=50?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-slate-700 font-medium",children:[o,"/",g," Tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-lg font-bold text-slate-800",children:p}),e.jsx("span",{className:"text-[10px] text-slate-400 uppercase",children:"KPI"})]})]})]})},B=({onCampaignSelect:a})=>{const{data:i,create:n,refresh:r}=j("campaigns"),{data:o}=j("users"),{data:g}=j("projects");j("brands"),j("services");const[p,d]=x.useState("list"),[u,m]=x.useState(""),[h,k]=x.useState("All Types"),[f,C]=x.useState("All Statuses"),[N,w]=x.useState(!1),[s,l]=x.useState({campaign_name:"",campaign_type:"Content",campaign_status:"planning",target_url:"",campaign_start_date:"",campaign_end_date:"",campaign_owner_id:"",project_id:"",brand_id:"",linked_service_id:"",sub_campaigns:[],description:""}),y={Content:["Blog Posts","Whitepapers","Infographics","Case Studies","E-books"],SEO:["Meta Tags","Schema Markup","Internal Linking","Keyword Research","Technical SEO"],SMM:["Reels","Stories","Posts","Carousels","Live Sessions"],Web:["Image Optimization","Code Minification","Caching","Core Web Vitals"],Analytics:["Conversion Goals","Event Tracking","Custom Reports","Dashboard Setup"]},v=i.filter(t=>{const c=(t.campaign_name||"").toLowerCase().includes(u.toLowerCase()),b=h==="All Types"||t.campaign_type===h,A=f==="All Statuses"||t.campaign_status===f||f==="active"&&t.campaign_status==="in_progress";return c&&b&&A}),S=async()=>{w(!0);try{await n({campaign_name:s.campaign_name,campaign_type:s.campaign_type,campaign_status:s.campaign_status,status:s.campaign_status,target_url:s.target_url,campaign_start_date:s.campaign_start_date,campaign_end_date:s.campaign_end_date,campaign_owner_id:s.campaign_owner_id?parseInt(s.campaign_owner_id):null,project_id:s.project_id?parseInt(s.project_id):null,brand_id:s.brand_id?parseInt(s.brand_id):null,linked_service_ids:s.linked_service_id?[parseInt(s.linked_service_id)]:[],sub_campaigns:JSON.stringify(s.sub_campaigns),description:s.description,backlinks_planned:0,backlinks_completed:0,tasks_total:0,tasks_completed:0,kpi_score:0}),d("list"),_(),r()}catch{}finally{w(!1)}},_=()=>{l({campaign_name:"",campaign_type:"Content",campaign_status:"planning",target_url:"",campaign_start_date:"",campaign_end_date:"",campaign_owner_id:"",project_id:"",brand_id:"",linked_service_id:"",sub_campaigns:[],description:""})},M=t=>{l(c=>({...c,sub_campaigns:c.sub_campaigns.includes(t)?c.sub_campaigns.filter(b=>b!==t):[...c.sub_campaigns,t]}))},L=()=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-6 border-b border-slate-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create Campaign"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Set up a new marketing campaign"})]}),e.jsx("button",{onClick:()=>{d("list"),_()},className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[65vh] space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Campaign Name *"}),e.jsx("input",{type:"text",value:s.campaign_name,onChange:t=>l({...s,campaign_name:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Blog Content Series - Tech Innovations"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Campaign Type *"}),e.jsxs("select",{value:s.campaign_type,onChange:t=>l({...s,campaign_type:t.target.value,sub_campaigns:[]}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"Content",children:"Content"}),e.jsx("option",{value:"SEO",children:"SEO"}),e.jsx("option",{value:"SMM",children:"SMM"}),e.jsx("option",{value:"Web",children:"Web"}),e.jsx("option",{value:"Analytics",children:"Analytics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Campaign Owner *"}),e.jsxs("select",{value:s.campaign_owner_id,onChange:t=>l({...s,campaign_owner_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"",children:"Select owner"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sub-Campaigns"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(y[s.campaign_type]||[]).map(t=>e.jsx("button",{type:"button",onClick:()=>M(t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${s.sub_campaigns.includes(t)?"bg-indigo-100 text-indigo-700 border-2 border-indigo-300":"bg-slate-100 text-slate-600 border-2 border-transparent hover:bg-slate-200"}`,children:t},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",value:s.campaign_start_date,onChange:t=>l({...s,campaign_start_date:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",value:s.campaign_end_date,onChange:t=>l({...s,campaign_end_date:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),e.jsxs("select",{value:s.campaign_status,onChange:t=>l({...s,campaign_status:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"planning",children:"Planned"}),e.jsx("option",{value:"active",children:"In Progress"}),e.jsx("option",{value:"on_hold",children:"On-Hold"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Linked Project"}),e.jsxs("select",{value:s.project_id,onChange:t=>l({...s,project_id:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{value:"",children:"Select project"}),g.map(t=>e.jsx("option",{value:t.id,children:t.project_name||t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target URL"}),e.jsx("input",{type:"url",value:s.target_url,onChange:t=>l({...s,target_url:t.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"https://example.com/landing-page"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 bg-slate-50",children:[e.jsx("button",{onClick:()=>{d("list"),_()},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:N||!s.campaign_name,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50",children:N?"Creating...":"Create Campaign"})]})]})});return e.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden bg-slate-50",children:[p==="create"&&L(),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Campaigns"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Manage and monitor all marketing campaigns"})]}),e.jsxs("button",{onClick:()=>d("create"),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 shadow-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Campaign"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"SEARCH"}),e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:u,onChange:t=>m(t.target.value),placeholder:"Search by title or owner...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 bg-white"})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"TYPE"}),e.jsxs("select",{value:h,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{children:"All Types"}),e.jsx("option",{children:"Content"}),e.jsx("option",{children:"SEO"}),e.jsx("option",{children:"SMM"}),e.jsx("option",{children:"Web"}),e.jsx("option",{children:"Analytics"})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase mb-1",children:"STATUS"}),e.jsxs("select",{value:f,onChange:t=>C(t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 bg-white",children:[e.jsx("option",{children:"All Statuses"}),e.jsx("option",{value:"active",children:"In Progress"}),e.jsx("option",{value:"planning",children:"Planned"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on_hold",children:"On-Hold"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"p-2 border border-slate-300 rounded-lg hover:bg-white",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})})]}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Showing ",v.length," campaigns"]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.length>0?v.map(t=>{const c=o.find(b=>b.id===t.campaign_owner_id);return e.jsx(W,{campaign:t,owner:c,onClick:()=>a&&a(t.id)},t.id)}):e.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No campaigns found. Create your first campaign to get started."})})})]})};export{B as default};
