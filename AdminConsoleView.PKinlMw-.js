import{r as o,i as M,j as e,R as _}from"./index.Cgn8UqAd.js";const k="/api/v1",G=()=>{const[g,d]=o.useState([]),[m,l]=o.useState([]),[i,x]=o.useState({totalUsers:0,activeAccounts:0,inactiveAccounts:0,pendingAccounts:0,adminCount:0,employeeCount:0,systemHealth:"Optimal"}),[v,y]=o.useState({admin:{total:0,active:0,inactive:0,permissions:12},employee:{total:0,active:0,inactive:0,permissions:4}}),[A,c]=o.useState(!0),[f,j]=o.useState(null),[p,E]=o.useState(!1),L=o.useCallback((r,s)=>{const t=r.filter(u=>u.role?.toLowerCase()==="admin"),n=r.filter(u=>u.role?.toLowerCase()!=="admin");return{totalUsers:r.length,activeAccounts:r.filter(u=>u.status==="active").length,inactiveAccounts:r.filter(u=>u.status==="inactive").length,pendingAccounts:s.length,adminCount:t.length,employeeCount:n.length,systemHealth:"Optimal"}},[]),N=o.useCallback(r=>{const s=r.filter(n=>n.role?.toLowerCase()==="admin"),t=r.filter(n=>n.role?.toLowerCase()!=="admin");return{admin:{total:s.length,active:s.filter(n=>n.status==="active").length,inactive:s.filter(n=>n.status==="inactive").length,permissions:12},employee:{total:t.length,active:t.filter(n=>n.status==="active").length,inactive:t.filter(n=>n.status==="inactive").length,permissions:4}}},[]),h=o.useCallback(async()=>{c(!0),j(null);try{const r=await fetch(`${k}/admin/employees`);if(r.ok){const s=await r.json(),t=s.filter(u=>u.status!=="pending"),n=s.filter(u=>u.status==="pending");d(t),l(n),E(!1);try{const u=await fetch(`${k}/admin/employees/metrics`);if(u.ok){const P=await u.json();x(P)}else x(L(t,n))}catch{x(L(t,n))}try{const u=await fetch(`${k}/admin/roles/stats`);if(u.ok){const P=await u.json();y(P)}else y(N(t))}catch{y(N(t))}}else throw new Error("API not available")}catch{console.log("Using localStorage fallback for employees"),E(!0);const s=M.users.getAll(),t=s.filter(u=>u.status!=="pending"),n=s.filter(u=>u.status==="pending");d(t),l(n),x(L(t,n)),y(N(t))}finally{c(!1)}},[L,N]);o.useEffect(()=>{h()},[h]);const W=o.useCallback(async r=>{try{if(p){const s=M.users.create({name:r.name||"",email:r.email||"",role:r.role||"user",status:"active",created_at:new Date().toISOString()});return await h(),s}else{const s=await fetch(`${k}/admin/employees`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok){const t=await s.json();return await h(),t}else{const t=await s.json();throw new Error(t.error||"Failed to create employee")}}}catch(s){return j(s.message),null}},[p,h]),O=o.useCallback(async(r,s)=>{try{if(p){const t=M.users.update(r,s);return await h(),t}else{const t=await fetch(`${k}/admin/employees/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok){const n=await t.json();return await h(),n}else{const n=await t.json();throw new Error(n.error||"Failed to update employee")}}}catch(t){return j(t.message),null}},[p,h]),U=o.useCallback(async(r,s)=>{try{if(p)return!0;{const t=await fetch(`${k}/admin/employees/${r}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:s})});if(t.ok)return!0;{const n=await t.json();throw new Error(n.error||"Failed to reset password")}}}catch(t){return j(t.message),!1}},[p]),B=o.useCallback(async r=>{try{if(p){const s=M.users.getById(r);if(s){const t=s.status==="active"?"inactive":"active",n=M.users.update(r,{status:t});return await h(),n}return null}else{const s=await fetch(`${k}/admin/employees/${r}/toggle-status`,{method:"POST",headers:{"Content-Type":"application/json"}});if(s.ok){const t=await s.json();return await h(),t.employee}else{const t=await s.json();throw new Error(t.error||"Failed to toggle status")}}}catch(s){return j(s.message),null}},[p,h]),F=o.useCallback(async r=>{try{if(p)return M.users.delete(r),await h(),!0;{const s=await fetch(`${k}/admin/employees/${r}`,{method:"DELETE"});if(s.ok||s.status===204)return await h(),!0;{const t=await s.json();throw new Error(t.error||"Failed to delete employee")}}}catch(s){return j(s.message),!1}},[p,h]),z=o.useCallback(async(r,s)=>{try{if(p){const n=M.users.getAll().find(u=>u.email.toLowerCase()===r.toLowerCase());return n?n.status==="inactive"?{success:!1,error:"User deactivated"}:n.status==="pending"?{success:!1,error:"Account pending approval"}:{success:!0,user:n}:{success:!1,error:"Invalid credentials"}}else{const t=await fetch(`${k}/admin/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})}),n=await t.json();return t.ok?{success:!0,user:n.user}:{success:!1,error:n.error}}}catch(t){return{success:!1,error:t.message}}},[p]),T=o.useCallback(async()=>{try{if(p){const s=M.users.getAll().filter(t=>t.status==="pending");l(s)}else{const r=await fetch(`${k}/admin/employees/pending`);if(r.ok){const s=await r.json();l(s)}}}catch(r){console.error("Error fetching pending registrations:",r)}},[p]),$=o.useCallback(async(r,s)=>{try{if(p){const t=M.users.update(r,{status:"active",role:s||"user"});return await h(),t}else{const t=await fetch(`${k}/admin/employees/${r}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:s||"user"})});if(t.ok){const n=await t.json();return await h(),n.employee}else{const n=await t.json();throw new Error(n.error||"Failed to approve registration")}}}catch(t){return j(t.message),null}},[p,h]),C=o.useCallback(async(r,s)=>{try{if(p)return M.users.delete(r),await h(),!0;{const t=await fetch(`${k}/admin/employees/${r}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:s})});if(t.ok)return await h(),!0;{const n=await t.json();throw new Error(n.error||"Failed to reject registration")}}}catch(t){return j(t.message),!1}},[p,h]),S=o.useCallback(async r=>{try{if(!p){const s=await fetch(`${k}/admin/employees/role/${r}`);if(s.ok)return await s.json()}return r==="admin"?g.filter(s=>s.role?.toLowerCase()==="admin"):g.filter(s=>s.role?.toLowerCase()!=="admin")}catch(s){return console.error("Error fetching employees by role:",s),r==="admin"?g.filter(t=>t.role?.toLowerCase()==="admin"):g.filter(t=>t.role?.toLowerCase()!=="admin")}},[p,g]);return{employees:g,pendingRegistrations:m,metrics:i,roleStats:v,loading:A,error:f,refresh:h,createEmployee:W,updateEmployee:O,resetPassword:U,toggleStatus:B,deleteEmployee:F,validateLogin:z,getPendingRegistrations:T,approveRegistration:$,rejectRegistration:C,fetchEmployeesByRole:S}},Y=({message:g,type:d,onClose:m})=>(o.useEffect(()=>{const l=setTimeout(m,4e3);return()=>clearTimeout(l)},[m]),e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg animate-fade-in ${d==="success"?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d==="success"?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{className:"font-medium text-sm",children:g})]})),K=({isOpen:g,onClose:d,onSubmit:m})=>{const[l,i]=o.useState({name:"",email:"",password:"",role:"user"}),[x,v]=o.useState({}),y=()=>{const c={};return l.name.trim()||(c.name="Full name is required"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(c.email="Invalid email format"):c.email="Email is required",l.password.trim()?l.password.length<6&&(c.password="Password must be at least 6 characters"):c.password="Password is required",v(c),Object.keys(c).length===0},A=c=>{c.preventDefault(),y()&&(m({name:l.name,email:l.email,password:l.password,role:l.role,status:"active",created_at:new Date().toISOString()}),i({name:"",email:"",password:"",role:"user"}),d())};return g?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Add New Employee"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-5",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-sm text-blue-700",children:"Only administrators can create accounts. Users cannot self-register."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:l.name,onChange:c=>i({...l,name:c.target.value}),placeholder:"Enter employee's full name",className:`w-full px-4 py-3 bg-slate-50 border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${x.name?"border-red-300":"border-slate-200"}`}),x.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Work Email"}),e.jsx("input",{type:"email",value:l.email,onChange:c=>i({...l,email:c.target.value}),placeholder:"name@company.com",className:`w-full px-4 py-3 bg-slate-50 border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${x.email?"border-red-300":"border-slate-200"}`}),x.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"System Password"}),e.jsx("input",{type:"password",value:l.password,onChange:c=>i({...l,password:c.target.value}),placeholder:"Set initial password",className:`w-full px-4 py-3 bg-slate-50 border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${x.password?"border-red-300":"border-slate-200"}`}),x.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.password})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Access Role"}),e.jsxs("select",{value:l.role,onChange:c=>i({...l,role:c.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"user",children:"Employee"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Admin: Full system access including Admin Console. Employee: Standard user access."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-3 border border-slate-200 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-emerald-600 text-white rounded-xl text-sm font-medium hover:bg-emerald-700 transition-colors",children:"Create Account"})]})]})]})]}):null},X=({isOpen:g,employee:d,onClose:m,onSubmit:l})=>{const[i,x]=o.useState({name:"",email:"",role:"user"}),[v,y]=o.useState({});o.useEffect(()=>{d&&x({name:d.name,email:d.email,role:d.role})},[d]);const A=()=>{const f={};return i.name.trim()||(f.name="Full name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(f.email="Invalid email format"):f.email="Email is required",y(f),Object.keys(f).length===0},c=f=>{f.preventDefault(),A()&&(l(i),m())};return!g||!d?null:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:m}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Edit Employee"}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Update account details"})]}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:i.name,onChange:f=>x({...i,name:f.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${v.name?"border-red-300":"border-slate-200"}`}),v.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i.email,onChange:f=>x({...i,email:f.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${v.email?"border-red-300":"border-slate-200"}`}),v.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Access Role"}),e.jsxs("select",{value:i.role,onChange:f=>x({...i,role:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"user",children:"Employee"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-3 border border-slate-200 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700 transition-colors",children:"Save Changes"})]})]})]})]})},Z=({isOpen:g,employee:d,onClose:m,onSubmit:l})=>{const[i,x]=o.useState(""),[v,y]=o.useState(""),[A,c]=o.useState(""),f=j=>{if(j.preventDefault(),i.length<6){c("Password must be at least 6 characters");return}if(i!==v){c("Passwords do not match");return}l(i),x(""),y(""),c(""),m()};return!g||!d?null:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:m}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Reset Password"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:["For ",d.name]})]}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-sm text-amber-700",children:"The employee will need to be provided this new password manually."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:i,onChange:j=>{x(j.target.value),c("")},placeholder:"••••••••",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:v,onChange:j=>{y(j.target.value),c("")},placeholder:"••••••••",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all"})]}),A&&e.jsx("p",{className:"text-red-500 text-sm",children:A}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-3 border border-slate-200 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-amber-500 text-white rounded-xl text-sm font-medium hover:bg-amber-600 transition-colors",children:"Update Password"})]})]})]})]})},ee=({isOpen:g,employee:d,onClose:m,onConfirm:l})=>{if(!g||!d)return null;const i=d.status==="inactive";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:m}),e.jsx("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-fade-in",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 ${i?"bg-emerald-100":"bg-red-100"}`,children:i?e.jsx("svg",{className:"w-8 h-8 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}):e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})})}),e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-2",children:i?"Activate Account":"Deactivate Account"}),e.jsx("p",{className:"text-slate-600 text-sm mb-6",children:i?`Are you sure you want to activate ${d.name}'s account? They will be able to log in again.`:`Are you sure you want to deactivate ${d.name}'s account? They will no longer be able to log in.`}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:m,className:"flex-1 px-4 py-3 border border-slate-200 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,className:`flex-1 px-4 py-3 text-white rounded-xl text-sm font-medium transition-colors ${i?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"}`,children:i?"Activate":"Deactivate"})]})]})})]})},D={admin:{label:"Administrator",color:"text-red-700",bgColor:"bg-red-100",permissions:["canViewAdminConsole","canManageUsers","canViewAuditLogs","canPerformQC","canApproveAssets","canRejectAssets","canRequestRework","canViewQCPanel","canSubmitForQC","canEditAllAssets","canDeleteAllAssets","canViewAllAssets"]},user:{label:"Employee",color:"text-green-700",bgColor:"bg-green-100",permissions:["canViewQCPanel","canSubmitForQC","canEditOwnAssets","canDeleteOwnAssets"]}},se=[{name:"Administration",permissions:[{key:"canViewAdminConsole",label:"Admin Console Access",description:"Access to Admin Console and configurations"},{key:"canManageUsers",label:"Manage Users",description:"Can create, edit, and deactivate user accounts"},{key:"canViewAuditLogs",label:"View Audit Logs",description:"Can view system audit logs and activity"}]},{name:"QC & Review",permissions:[{key:"canPerformQC",label:"Perform QC Review",description:"Can approve, reject, or request rework on assets"},{key:"canApproveAssets",label:"Approve Assets",description:"Can approve assets in QC review"},{key:"canRejectAssets",label:"Reject Assets",description:"Can reject assets in QC review"},{key:"canRequestRework",label:"Request Rework",description:"Can request rework on assets"},{key:"canViewQCPanel",label:"View QC Panel",description:"Can view QC status and checklist"},{key:"canSubmitForQC",label:"Submit for QC",description:"Can submit assets for QC review"}]},{name:"Asset Management",permissions:[{key:"canEditOwnAssets",label:"Edit Own Assets",description:"Can edit assets they created"},{key:"canDeleteOwnAssets",label:"Delete Own Assets",description:"Can delete assets they created"},{key:"canEditAllAssets",label:"Edit All Assets",description:"Can edit any asset in the system"},{key:"canDeleteAllAssets",label:"Delete All Assets",description:"Can delete any asset in the system"},{key:"canViewAllAssets",label:"View All Assets",description:"Can view all assets across users"}]}],ae=({currentUser:g,onNavigate:d})=>{const{employees:m,pendingRegistrations:l,metrics:i,roleStats:x,loading:v,createEmployee:y,updateEmployee:A,resetPassword:c,toggleStatus:f,approveRegistration:j,rejectRegistration:p}=G(),[E,L]=o.useState("dashboard"),[N,h]=o.useState(null),[W,O]=o.useState(!1),[U,B]=o.useState(!1),[F,z]=o.useState(!1),[T,$]=o.useState(!1),[C,S]=o.useState(null),[r,s]=o.useState(null),t=g?.role==="admin",n=N?m.filter(a=>N==="admin"?a.role?.toLowerCase()==="admin":a.role?.toLowerCase()!=="admin"):m,u=a=>{h(a),L("dashboard")},P=()=>{h(null)},q=async a=>{if(m.find(R=>R.email.toLowerCase()===a.email?.toLowerCase())){s({message:"Email already exists",type:"error"});return}const w=await y(a);s(w?{message:"Employee account created successfully",type:"success"}:{message:"Failed to create employee",type:"error"})},I=async a=>{if(!C)return;if(m.find(R=>R.email.toLowerCase()===a.email?.toLowerCase()&&R.id!==C.id)){s({message:"Email already exists",type:"error"});return}const w=await A(C.id,a);s(w?{message:"Employee updated successfully",type:"success"}:{message:"Failed to update employee",type:"error"})},H=async a=>{if(!C)return;const b=await c(C.id,a);s(b?{message:"Password reset successfully",type:"success"}:{message:"Failed to reset password",type:"error"})},Q=async()=>{if(!C)return;const a=await f(C.id);s(a?{message:a.status==="active"?"User activated successfully":"User deactivated successfully",type:"success"}:{message:"Failed to update status",type:"error"}),$(!1),S(null)},V=async(a,b)=>{const w=await j(a.id,b);s(w?{message:`${a.name}'s registration approved successfully`,type:"success"}:{message:"Failed to approve registration",type:"error"})},J=async a=>{const b=await p(a.id);s(b?{message:`${a.name}'s registration rejected`,type:"success"}:{message:"Failed to reject registration",type:"error"})};return t?v?e.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading employees..."})]})}):e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 animate-fade-in overflow-hidden",children:[r&&e.jsx(Y,{message:r.message,type:r.type,onClose:()=>s(null)}),e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Admin Console"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Oversee all company accounts and manage system access."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-bold uppercase tracking-wide",children:"Admin Only"}),E==="dashboard"&&e.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-emerald-600 text-white rounded-xl text-sm font-medium hover:bg-emerald-700 transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Employee"]})]})]}),e.jsxs("div",{className:"flex gap-1 mt-4 border-b border-slate-200 -mb-5",children:[e.jsx("button",{onClick:()=>L("dashboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${E==="dashboard"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Employee Management"]})}),e.jsx("button",{onClick:()=>L("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${E==="pending"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pending Requests",l.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded-full",children:l.length})]})}),e.jsx("button",{onClick:()=>L("permissions"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${E==="permissions"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Roles & Permissions"]})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E==="dashboard"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:i.totalUsers}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-blue-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:"text-xs font-medium",children:"All accounts"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Registered Accounts"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:i.totalUsers}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-indigo-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-medium",children:"Admin approved"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Active Accounts"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:i.activeAccounts}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-emerald-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-medium",children:"System health optimal"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Inactive Accounts"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-2",children:i.inactiveAccounts}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-rose-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("span",{className:"text-xs font-medium",children:"Restricted access"})]})]})]}),l.length>0&&e.jsx("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-amber-800",children:[l.length," Pending Registration",l.length>1?"s":""]}),e.jsx("p",{className:"text-xs text-amber-700",children:"New users are waiting for your approval to access the system."})]})]}),e.jsx("button",{onClick:()=>L("pending"),className:"px-4 py-2 bg-amber-500 text-white text-sm font-medium rounded-lg hover:bg-amber-600 transition-colors",children:"Review Now"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Employee Management"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:N?`Showing ${N==="admin"?"Administrators":"Employees"} (${n.length})`:`Manage all registered employee accounts (${m.length})`})]}),N&&e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100 text-slate-600 rounded-lg text-sm font-medium hover:bg-slate-200 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filter"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50",children:[e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Employee Name"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Email ID"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Role"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Status"}),e.jsx("th",{className:"text-right px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(a=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm ${a.role==="admin"?"bg-gradient-to-br from-red-400 to-red-600":"bg-gradient-to-br from-indigo-400 to-indigo-600"}`,children:a.name?.charAt(0)?.toUpperCase()||"U"}),e.jsx("span",{className:"font-medium text-slate-800",children:a.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-slate-600",children:a.email})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${a.role==="admin"?"bg-red-100 text-red-700 border border-red-200":"bg-green-100 text-green-700 border border-green-200"}`,children:a.role==="admin"?"Admin":"Employee"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-sm font-medium ${a.status==="active"?"text-emerald-600":"text-slate-500"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${a.status==="active"?"bg-emerald-500":"bg-slate-400"}`}),a.status==="active"?"Active":"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{S(a),B(!0)},className:"p-2 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>{S(a),z(!0)},className:"p-2 text-slate-500 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Reset Password",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("button",{onClick:()=>{S(a),$(!0)},className:`p-2 rounded-lg transition-colors ${a.status==="active"?"text-slate-500 hover:text-red-600 hover:bg-red-50":"text-emerald-500 hover:text-emerald-600 hover:bg-emerald-50"}`,title:a.status==="active"?"Deactivate":"Activate",children:a.status==="active"?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})})]})})]},a.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-slate-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"font-medium",children:N?`No ${N==="admin"?"administrators":"employees"} found`:"No employees found"}),e.jsx("p",{className:"text-sm mt-1",children:N?"Try clearing the filter or add new users.":'Click "Add New Employee" to create the first account.'})]})})})]})]})})]})]}):E==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Pending Registration Requests"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Review and approve or reject new user registration requests"})]}),l.length>0?e.jsx("div",{className:"divide-y divide-slate-100",children:l.map(a=>e.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center text-white font-semibold text-lg",children:a.name?.charAt(0)?.toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:a.name}),e.jsx("p",{className:"text-sm text-slate-500",children:a.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded-full",children:"Pending Approval"}),e.jsxs("span",{className:"text-xs text-slate-400",children:["Requested ",new Date(a.created_at||"").toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{id:`role-${a.id}`,defaultValue:"user",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"user",children:"Employee"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("button",{onClick:()=>{const b=document.getElementById(`role-${a.id}`);V(a,b?.value||"user")},className:"px-4 py-2 bg-emerald-600 text-white text-sm font-medium rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),e.jsxs("button",{onClick:()=>J(a),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})]})},a.id))}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-1",children:"No Pending Requests"}),e.jsx("p",{className:"text-sm text-slate-500",children:"All registration requests have been processed."})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-blue-800",children:"Registration Approval Process"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Users can request access from the main login panel"}),e.jsx("li",{children:'• All requests remain in "Pending" status until admin approval'}),e.jsx("li",{children:"• Assign the appropriate role (Admin/Employee) before approving"}),e.jsx("li",{children:"• Rejected requests are permanently removed from the system"})]})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:"System Roles"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Click on a role card to view users with that role"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["admin","user"].map(a=>{const b=D[a],w=a==="admin"?x.admin:x.employee;return e.jsxs("button",{onClick:()=>u(a),className:"bg-white rounded-xl border-2 border-slate-200 p-5 hover:border-indigo-400 hover:shadow-lg transition-all text-left group cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${b.bgColor} ${b.color}`,children:b.label}),e.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[w.total," user",w.total!==1?"s":""]})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-800 mb-1",children:w.permissions}),e.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"permissions granted"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsxs("span",{children:[w.active," active"]}),e.jsxs("span",{children:[w.inactive," inactive"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity mt-3",children:[e.jsxs("span",{children:["View ",b.label,"s"]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},a)})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Permission Matrix"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Role-based access control for Admin and Employee roles"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-4 h-4 bg-green-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),"Granted"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-4 h-4 bg-slate-200 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),"Denied"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wide w-64",children:"Permission"}),["admin","user"].map(a=>e.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-slate-600 uppercase tracking-wide",children:e.jsx("span",{className:`px-2.5 py-1 rounded ${D[a].bgColor} ${D[a].color}`,children:D[a].label})},a))]})}),e.jsx("tbody",{children:se.map(a=>e.jsxs(_.Fragment,{children:[e.jsx("tr",{className:"bg-slate-50",children:e.jsx("td",{colSpan:3,className:"px-6 py-2",children:e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:a.name})})}),a.permissions.map(b=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-800",children:b.label}),e.jsx("p",{className:"text-xs text-slate-500",children:b.description})]})}),["admin","user"].map(w=>{const R=D[w].permissions.includes(b.key);return e.jsx("td",{className:"text-center px-4 py-3",children:R?e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-green-500 rounded-full",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}):e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-slate-200 rounded-full",children:e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})},w)})]},b.key))]},a.name))})]})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-blue-800",children:"Security & Enforcement Rules"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Admin Console access is validated at both API and UI level"}),e.jsx("li",{children:"• Role permissions are enforced server-side"}),e.jsx("li",{children:"• Direct URL access to Admin Console by non-admin users is blocked"}),e.jsx("li",{children:"• All user creation, edits, and status changes are audit-logged"}),e.jsx("li",{children:"• Users cannot switch views manually - role determines view access"})]})]})]})})]})}),e.jsx(K,{isOpen:W,onClose:()=>O(!1),onSubmit:q}),e.jsx(X,{isOpen:U,employee:C,onClose:()=>{B(!1),S(null)},onSubmit:I}),e.jsx(Z,{isOpen:F,employee:C,onClose:()=>{z(!1),S(null)},onSubmit:H}),e.jsx(ee,{isOpen:T,employee:C,onClose:()=>{$(!1),S(null)},onConfirm:Q})]}):e.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access the Admin Console."}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Only administrators can manage employee accounts and system access."}),e.jsx("button",{onClick:()=>d?.("dashboard",null),className:"mt-6 px-6 py-2.5 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors",children:"Go to Dashboard"})]})})};export{ae as default};
