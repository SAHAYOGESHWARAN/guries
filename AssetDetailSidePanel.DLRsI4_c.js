import{r as h,j as e,e as se,u as R}from"./index.Cgn8UqAd.js";const w="/api/v1";function te(s){const[y,b]=h.useState(null),[g,m]=h.useState(!1),[p,c]=h.useState(null),d=h.useCallback(async()=>{if(s){m(!0),c(null);try{const n=await fetch(`${w}/assetLibrary/${s}/usage`);if(!n.ok)throw new Error("Failed to fetch usage data");const r=await n.json();b(r)}catch(n){c(n.message),console.error("Error fetching asset usage:",n)}finally{m(!1)}}},[s]);return h.useEffect(()=>{d()},[d]),{usageData:y,loading:g,error:p,refetch:d,addWebsiteUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/website`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to add website usage");await d()}catch(r){throw c(r.message),r}},deleteWebsiteUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/website/${n}`,{method:"DELETE"})).ok)throw new Error("Failed to delete website usage");await d()}catch(r){throw c(r.message),r}},addSocialMediaUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/social`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to add social media usage");await d()}catch(r){throw c(r.message),r}},updateSocialMediaUsage:async(n,r)=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/social/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to update social media usage");await d()}catch(k){throw c(k.message),k}},deleteSocialMediaUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/social/${n}`,{method:"DELETE"})).ok)throw new Error("Failed to delete social media usage");await d()}catch(r){throw c(r.message),r}},addBacklinkUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/backlinks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to add backlink usage");await d()}catch(r){throw c(r.message),r}},updateBacklinkUsage:async(n,r)=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/backlinks/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to update backlink usage");await d()}catch(k){throw c(k.message),k}},deleteBacklinkUsage:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/backlinks/${n}`,{method:"DELETE"})).ok)throw new Error("Failed to delete backlink usage");await d()}catch(r){throw c(r.message),r}},updateEngagementMetrics:async n=>{if(s)try{if(!(await fetch(`${w}/assetLibrary/${s}/usage/metrics`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to update engagement metrics");await d()}catch(r){throw c(r.message),r}}}}const ae=({asset:s,isAdmin:y=!1})=>{const{usageData:b,loading:g,error:m}=te(s.id),p=a=>{switch(a.toLowerCase()){case"linkedin":return{bg:"bg-blue-600",icon:"Li",color:"text-blue-600"};case"twitter":case"x":return{bg:"bg-sky-500",icon:"X",color:"text-sky-500"};case"facebook":return{bg:"bg-blue-700",icon:"Fb",color:"text-blue-700"};case"instagram":return{bg:"bg-gradient-to-r from-purple-500 to-pink-500",icon:"Ig",color:"text-pink-500"};case"youtube":return{bg:"bg-red-600",icon:"Yt",color:"text-red-600"};case"pinterest":return{bg:"bg-red-500",icon:"Pi",color:"text-red-500"};default:return{bg:"bg-slate-500",icon:a.charAt(0).toUpperCase(),color:"text-slate-500"}}},c=a=>{switch(a){case"Approved":return"bg-green-100 text-green-700";case"Pending":return"bg-amber-100 text-amber-700";case"Rejected":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-700"}},d=a=>a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toLocaleString();if(g)return e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-slate-500",children:"Loading usage data..."})]});if(m)return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:e.jsxs("span",{className:"text-red-600",children:["Error loading usage data: ",m]})});const C=b?.website_urls||[],S=b?.social_media_posts||[],i=b?.backlink_submissions||[],N=b?.engagement_metrics||{total_impressions:0,total_clicks:0,total_shares:0,ctr_percentage:0,performance_summary:null};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-purple-800 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," Usage Panel"]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Displays where and how the asset is used, fetched dynamically from usage records"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸŒ"})," Website URLs"]})}),e.jsx("div",{className:"p-4",children:C.length>0?e.jsx("div",{className:"space-y-2",children:C.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("span",{className:"text-indigo-500",children:"ðŸ”—"}),e.jsx("a",{href:a.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 font-medium text-sm truncate",title:a.website_url,children:a.website_url})]}),e.jsx("a",{href:a.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-slate-600 p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]},a.id))}):e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No website URLs linked to this asset yet."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“±"})," Social Media Posts"]})}),e.jsx("div",{className:"p-4",children:S.length>0?e.jsx("div",{className:"space-y-2",children:S.map(a=>{const o=p(a.platform_name);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${o.bg}`,children:o.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900",children:a.platform_name}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${a.status==="Published"?"bg-green-100 text-green-700":a.status==="Scheduled"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:a.status})]})]}),a.post_url?e.jsx("a",{href:a.post_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View Post"}):e.jsx("span",{className:"text-slate-400 text-sm",children:"No link"})]},a.id)})}):e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No social media posts linked to this asset yet."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”—"})," Backlink Submissions"]})}),e.jsx("div",{className:"p-4",children:i.length>0?e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-500",children:"ðŸ”—"}),e.jsx("span",{className:"font-medium text-slate-900",children:a.domain_name})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c(a.approval_status)}`,children:a.approval_status})]},a.id))}):e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No backlink submissions for this asset yet."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“ˆ"})," Engagement Metrics"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-indigo-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-indigo-500",children:"ðŸ“Š"}),e.jsx("span",{className:"text-xs text-indigo-600 uppercase tracking-wide font-medium",children:"Impressions"})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:d(N.total_impressions)})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-green-500",children:"ðŸ‘†"}),e.jsx("span",{className:"text-xs text-green-600 uppercase tracking-wide font-medium",children:"Clicks"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:d(N.total_clicks)})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-purple-500",children:"ðŸ“ˆ"}),e.jsx("span",{className:"text-xs text-purple-600 uppercase tracking-wide font-medium",children:"CTR"})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[typeof N.ctr_percentage=="number"?N.ctr_percentage.toFixed(1):"0","%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-orange-500",children:"ðŸ”„"}),e.jsx("span",{className:"text-xs text-orange-600 uppercase tracking-wide font-medium",children:"Shares"})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:d(N.total_shares)})]})]})})]}),N.performance_summary&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-100/50 px-4 py-3 border-b border-blue-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“‹"})," Performance Summary"]})}),e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:N.performance_summary})})]}),s.keywords&&s.keywords.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ·ï¸"})," Keywords Tagged"]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((a,o)=>e.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{className:"text-indigo-400",children:"â—‡"}),a]},o))})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"â¬‡ï¸"})," Actions"]})}),e.jsx("div",{className:"p-4 flex flex-wrap gap-3",children:(s.file_url||s.thumbnail_url)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{const a=s.file_url||s.thumbnail_url;if(a){const o=document.createElement("a");o.href=a,o.download=s.name||"asset",o.click()}},className:"flex-1 min-w-[140px] px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]}),e.jsxs("button",{onClick:()=>{const a=s.file_url||s.thumbnail_url;if(a)if(a.startsWith("data:")){const o=window.open();o&&o.document.write(`<img src="${a}" style="max-width:100%; height:auto;" />`)}else window.open(a,"_blank","noopener,noreferrer")},className:"flex-1 min-w-[140px] px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Full Size"]})]})})]})]})},re=({asset:s,onEdit:y,onResubmit:b,compact:g=!1})=>{const m=s.status==="Rework Required",p=s.rework_count||0;return m?g?e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-orange-100 border border-orange-300 rounded-full",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})]}),e.jsx("span",{className:"text-xs font-bold text-orange-700",children:"REWORK"}),p>0&&e.jsxs("span",{className:"text-xs font-medium text-orange-600",children:["(",p,")"]})]}):e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-300 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-5 w-5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-orange-500 text-white text-xs font-bold items-center justify-center",children:p})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-bold text-orange-800",children:"Rework Required"}),e.jsxs("span",{className:"px-2 py-0.5 bg-orange-200 text-orange-800 text-xs font-bold rounded-full",children:[p," ",p===1?"time":"times"]})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"This asset has been sent back for revisions. Please review the QC feedback and make the necessary updates."}),s.qc_remarks&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 mb-3 border border-orange-200",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-600 uppercase tracking-wide mb-1",children:"QC Feedback"}),e.jsx("p",{className:"text-sm text-slate-700",children:s.qc_remarks})]}),e.jsxs("div",{className:"flex gap-2",children:[y&&e.jsxs("button",{onClick:()=>y(s),className:"px-4 py-2 bg-orange-600 text-white rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Asset"]}),b&&e.jsxs("button",{onClick:()=>b(s),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resubmit for QC"]})]})]})]})}):null},ne=({asset:s,isOpen:y,onClose:b,onEdit:g,onNavigate:m,onRefresh:p})=>{const[c,d]=h.useState("metadata"),[C,S]=h.useState(!1),[i,N]=h.useState(null),[a,o]=h.useState(!1),{user:x,hasPermission:T}=se(),$=T("canSubmitForQC"),n=T("canPerformQC"),{data:r=[]}=R("services"),{data:k=[]}=R("subServices"),{data:A=[]}=R("users"),{data:B=[]}=R("tasks"),{data:W=[]}=R("campaigns"),{data:O=[]}=R("projects"),{data:H=[]}=R("content"),{data:E=[]}=R("asset-type-master");h.useEffect(()=>{(async()=>{if(!(!s?.id||!y)){o(!0);try{const q=await fetch(`/api/v1/assetLibrary/${s.id}/qc-reviews`);if(q.ok){const ee=await q.json();N(ee)}}catch(l){console.error("Failed to fetch QC review data:",l)}finally{o(!1)}}})()},[s?.id,y]);const Q=h.useMemo(()=>{const t=new Map;return A.forEach(l=>t.set(l.id,l)),t},[A]),U=h.useMemo(()=>s.type?E.find(t=>t.asset_type_name?.toLowerCase()===s.type?.toLowerCase()):null,[E,s.type]);if(!y)return null;const L=()=>{const t=s.linked_service_id||s.linked_service_ids&&s.linked_service_ids[0];return t?r.find(l=>l.id===t):null},_=()=>{const t=s.linked_sub_service_id||s.linked_sub_service_ids&&s.linked_sub_service_ids[0];return t?k.find(l=>l.id===t):null},u=()=>{const t=s.linked_task_id||s.linked_task;return t?B.find(l=>l.id===t):null},v=()=>s.linked_campaign_id?W.find(t=>t.id===s.linked_campaign_id):null,j=()=>s.linked_project_id?O.find(t=>t.id===s.linked_project_id):null,f=()=>s.linked_repository_item_id?H.find(t=>t.id===s.linked_repository_item_id):null,D=()=>s.created_by?Q.get(s.created_by):null,P=()=>s.updated_by?Q.get(s.updated_by):null,F=()=>s.designed_by?Q.get(s.designed_by):null,M=()=>s.qc_reviewer_id?Q.get(s.qc_reviewer_id):null,z=x&&(s.submitted_by===x.id||s.created_by===x.id||s.designed_by===x.id),V=$&&z&&["Draft","Rework Required"].includes(s.status||""),K=h.useCallback(async()=>{if(!(!x||!$)&&confirm(`Submit "${s.name}" for QC Review?`)){S(!0);try{const l=await fetch(`/api/v1/assetLibrary/${s.id}/submit-qc`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":String(x.id),"X-User-Role":x.role},body:JSON.stringify({submitted_by:x.id,seo_score:s.seo_score,grammar_score:s.grammar_score})});if(l.ok)alert("Asset submitted for QC review!"),p?.();else{const q=await l.json().catch(()=>({}));alert(`Failed to submit: ${q.error||"Unknown error"}`)}}catch(t){alert(`Failed to submit: ${t.message||"Network error"}`)}finally{S(!1)}}},[s,x,$,p]),J=h.useCallback(async()=>{if(!(!x||!$)&&confirm(`Resubmit "${s.name}" for QC review after rework?`)){S(!0);try{const l=await fetch(`/api/v1/assetLibrary/${s.id}/submit-qc`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":String(x.id),"X-User-Role":x.role},body:JSON.stringify({submitted_by:x.id,rework_count:(s.rework_count||0)+1,seo_score:s.seo_score,grammar_score:s.grammar_score})});if(l.ok)alert("Asset resubmitted for QC review!"),p?.();else{const q=await l.json().catch(()=>({}));alert(`Failed to resubmit: ${q.error||"Unknown error"}`)}}catch(t){alert(`Failed to resubmit: ${t.message||"Network error"}`)}finally{S(!1)}}},[s,x,$,p]),X=t=>{switch(t){case"QC Approved":case"Published":return"bg-green-100 text-green-800";case"Pending QC Review":return"bg-amber-100 text-amber-800";case"QC Rejected":case"Rework Required":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},Y=t=>t?t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`:U?.file_size||"-",G=()=>s.dimensions||U?.dimensions||"-",I=()=>s.file_type?s.file_type.toUpperCase():U?.file_formats||"-",Z=[{id:"metadata",label:"Metadata",icon:"ðŸ“‹"},{id:"mapping",label:"Mapping & Links",icon:"ðŸ”—"},{id:"qc",label:"QC Panel",icon:"âœ…"},{id:"usage",label:"Usage",icon:"ðŸ“Š"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:b}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white shadow-2xl flex flex-col h-full animate-slide-in-right",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${X(s.status||"Draft")}`,children:s.status||"Draft"}),e.jsxs("span",{className:"text-xs text-slate-500",children:["ID: ",s.id]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:g&&e.jsx("button",{onClick:()=>g(s),className:"px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors",children:"Edit"})})]}),s.status==="Rework Required"&&e.jsx("div",{className:"mt-4",children:e.jsx(re,{asset:s,onEdit:g,compact:!1})}),e.jsx("div",{className:"flex gap-1 mt-4 border-b border-slate-200 -mb-4",children:Z.map(t=>e.jsxs("button",{onClick:()=>d(t.id),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${c===t.id?"bg-indigo-50 text-indigo-700 border-b-2 border-indigo-600":"text-slate-600 hover:text-slate-900 hover:bg-slate-50"}`,children:[e.jsx("span",{className:"mr-1.5",children:t.icon}),t.label]},t.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c==="metadata"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Preview"}),s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url,alt:s.name,className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"}):e.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“„"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-indigo-50 px-4 py-3 border-b border-indigo-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-indigo-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Asset Metadata"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Asset ID"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 mt-1",children:s.id})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Asset Type"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700",children:s.type||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Content Type"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700",children:s.content_type||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Asset Category"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700",children:s.asset_category||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Asset Format"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700",children:s.asset_format||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Application Type"}),e.jsx("div",{className:"mt-1",children:s.application_type?e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.application_type==="web"?"bg-blue-100 text-blue-700":s.application_type==="seo"?"bg-green-100 text-green-700":s.application_type==="smm"?"bg-purple-100 text-purple-700":"bg-slate-100 text-slate-700"}`,children:s.application_type.toUpperCase()}):e.jsx("span",{className:"text-sm text-slate-500",children:"-"})})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Dimensions"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:G()}),U&&e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"From Asset Type Master"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Size"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:Y(s.file_size)}),U&&!s.file_size&&e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"From Asset Type Master"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Format"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:I()}),U&&!s.file_type&&e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"From Asset Type Master"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Version"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.version_number||"v1.0"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Repository"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.repository||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Usage Count"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.usage_count??0})]})]})})]}),s.keywords&&s.keywords.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-amber-50 px-4 py-3 border-b border-amber-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ·ï¸"})," Keywords"]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((t,l)=>e.jsx("span",{className:"px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium",children:t},l))})})]}),s.file_url&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 px-4 py-3 border-b border-green-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-green-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“¥"})," File Download"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("a",{href:s.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Asset"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‘¤"})," User & Date Information"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Created By"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:D()?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:D()?.name?.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-slate-900",children:D()?.name})]}):e.jsx("span",{className:"text-sm text-slate-500",children:"-"})})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Updated By"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:P()?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:P()?.name?.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-slate-900",children:P()?.name})]}):e.jsx("span",{className:"text-sm text-slate-500",children:"-"})})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Designed By"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:F()?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-rose-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:F()?.name?.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-slate-900",children:F()?.name})]}):e.jsx("span",{className:"text-sm text-slate-500",children:"-"})})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Created Date"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.created_at?new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Last Updated Date"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.updated_at?new Date(s.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]})]})})]}),s.application_type==="web"&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŒ"})," Web Application Fields"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Web Title"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_title||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Web Description"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_description||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Meta Description"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_meta_description||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Web URL"}),s.web_url?e.jsx("a",{href:s.web_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline mt-1 block truncate",children:s.web_url}):e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Web Keywords"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_keywords||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H1"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_h1||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H2 (1)"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_h2_1||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H2 (2)"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.web_h2_2||"-"})]}),s.web_body_content&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Body Content"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1 whitespace-pre-wrap max-h-32 overflow-y-auto",children:s.web_body_content})]})]})})]}),s.application_type==="seo"&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 px-4 py-3 border-b border-green-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-green-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”"})," SEO Application Fields"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"SEO Title"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_title||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Target URL"}),s.seo_target_url?e.jsx("a",{href:s.seo_target_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:underline mt-1 block truncate",children:s.seo_target_url}):e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Focus Keyword"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_focus_keyword||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Content Type"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_content_type||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Meta Description"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_meta_description||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Content Description"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_content_description||"-"})]}),s.seo_keywords&&s.seo_keywords.length>0&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"SEO Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.seo_keywords.map((t,l)=>e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-xs",children:t},l))})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H1"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_h1||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H2 (1)"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_h2_1||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"H2 (2)"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.seo_h2_2||"-"})]}),s.seo_content_body&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Content Body"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1 whitespace-pre-wrap max-h-32 overflow-y-auto",children:s.seo_content_body})]})]})})]}),s.application_type==="smm"&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-purple-50 px-4 py-3 border-b border-purple-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“±"})," SMM Application Fields"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Platform"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1 capitalize",children:s.smm_platform||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Post Type"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_post_type||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Title"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_title||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_description||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"URL"}),s.smm_url?e.jsx("a",{href:s.smm_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-purple-600 hover:underline mt-1 block truncate",children:s.smm_url}):e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Tag"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_tag||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Hashtags"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_hashtags||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Media Type"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1 capitalize",children:s.smm_media_type||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Campaign Type"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_campaign_type||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"CTA"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_cta||"-"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-slate-900 mt-1",children:s.smm_target_audience||"-"})]}),s.smm_media_url&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide font-medium",children:"Media URL"}),e.jsx("a",{href:s.smm_media_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-purple-600 hover:underline mt-1 block truncate",children:s.smm_media_url})]})]})})]})]}),c==="mapping"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”—"})," Asset Linkages"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'Mappings selected during asset upload from "Map Assets to Source Work" section'})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-purple-50 px-4 py-3 border-b border-purple-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Linked Task"]})}),e.jsx("div",{className:"p-4",children:u()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:u()?.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${u()?.status==="Completed"?"bg-green-100 text-green-700":u()?.status==="In Progress"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:u()?.status}),u()?.priority&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${u()?.priority==="High"?"bg-red-100 text-red-700":u()?.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:u()?.priority})]})]}),e.jsx("button",{onClick:()=>m?.("tasks",u()?.id),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No task linked"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 px-4 py-3 border-b border-green-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-green-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“¢"})," Linked Campaign"]})}),e.jsx("div",{className:"p-4",children:v()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:v()?.campaign_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v()?.campaign_type&&e.jsxs("span",{className:"text-xs text-slate-500",children:["Type: ",v()?.campaign_type]}),v()?.campaign_status&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${v()?.campaign_status==="Active"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:v()?.campaign_status})]})]}),e.jsx("button",{onClick:()=>m?.("campaigns",v()?.id),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No campaign linked"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-amber-50 px-4 py-3 border-b border-amber-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“"})," Linked Project"]})}),e.jsx("div",{className:"p-4",children:j()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:j()?.project_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[j()?.project_type&&e.jsxs("span",{className:"text-xs text-slate-500",children:["Type: ",j()?.project_type]}),j()?.project_status&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${j()?.project_status==="Active"?"bg-green-100 text-green-700":j()?.project_status==="Completed"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:j()?.project_status})]})]}),e.jsx("button",{onClick:()=>m?.("projects",j()?.id),className:"text-amber-600 hover:text-amber-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No project linked"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¢"})," Linked Service"]})}),e.jsx("div",{className:"p-4",children:L()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:L()?.service_name}),L()?.service_code&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Code: ",L()?.service_code]})]}),e.jsx("button",{onClick:()=>m?.("services",L()?.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No service linked"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-indigo-50 px-4 py-3 border-b border-indigo-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-indigo-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‚"})," Linked Sub-Service"]})}),e.jsx("div",{className:"p-4",children:_()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:_()?.sub_service_name}),_()?.status&&e.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ${_()?.status==="Published"?"bg-green-100 text-green-700":_()?.status==="Draft"?"bg-slate-100 text-slate-700":"bg-blue-100 text-blue-700"}`,children:_()?.status})]}),e.jsx("button",{onClick:()=>m?.("subservices",_()?.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No sub-service linked"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-teal-50 px-4 py-3 border-b border-teal-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-teal-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“š"})," Linked Repository Item"]})}),e.jsx("div",{className:"p-4",children:f()?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:f()?.content_title_clean}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f()?.asset_type&&e.jsxs("span",{className:"text-xs text-slate-500",children:["Type: ",f()?.asset_type]}),f()?.status&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${f()?.status==="published"?"bg-green-100 text-green-700":f()?.status==="draft"?"bg-slate-100 text-slate-700":"bg-blue-100 text-blue-700"}`,children:f()?.status})]})]}),e.jsx("button",{onClick:()=>m?.("content",f()?.id),className:"text-teal-600 hover:text-teal-700 text-sm font-medium",children:"View â†’"})]}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No repository item linked"})})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Linkage Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${u()?"text-purple-600":"text-slate-300"}`,children:u()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Task"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${v()?"text-green-600":"text-slate-300"}`,children:v()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Campaign"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${j()?"text-amber-600":"text-slate-300"}`,children:j()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Project"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${L()?"text-blue-600":"text-slate-300"}`,children:L()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Service"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${_()?"text-indigo-600":"text-slate-300"}`,children:_()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Sub-Service"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${f()?"text-teal-600":"text-slate-300"}`,children:f()?"âœ“":"â€”"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Repository"})]})]})]})]}),c==="qc"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-indigo-800 flex items-center gap-2",children:[e.jsx("span",{children:"âœ…"})," QC Review Panel"]}),e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:n?"Full QC review access - approve, reject, or request rework":"View QC status and submit assets for review"})]}),V&&e.jsxs("div",{className:"bg-white rounded-xl border-2 border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸš€"})," QC Actions"]})}),e.jsxs("div",{className:"p-4",children:[s.status==="Draft"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This asset is ready to be submitted for QC review. Once submitted, it will be reviewed by an administrator."}),e.jsx("button",{onClick:K,disabled:C,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit for QC Review"]})})]}),s.status==="Rework Required"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-orange-800 font-medium",children:"Rework Required"}),e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Please address the feedback below and resubmit for review."})]}),s.qc_remarks&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Reviewer Feedback"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.qc_remarks})]}),e.jsxs("div",{className:"flex gap-3",children:[g&&e.jsxs("button",{onClick:()=>g(s),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Asset"]}),e.jsx("button",{onClick:J,disabled:C,className:"flex-1 px-4 py-2.5 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Resubmitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Resubmit for QC"]})})]})]})]})]}),s.status==="Pending QC Review"&&e.jsx("div",{className:"bg-amber-50 rounded-xl border border-amber-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-amber-600 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800",children:"Pending QC Review"}),e.jsx("p",{className:"text-xs text-amber-600",children:"Your asset is in the review queue. You'll be notified once reviewed."})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-indigo-50 px-4 py-3 border-b border-indigo-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-indigo-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," QC Summary"]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-28 h-28 rounded-full flex items-center justify-center border-4 ${s.qc_score!==void 0?s.qc_score>=80?"border-green-500 bg-green-50":s.qc_score>=60?"border-amber-500 bg-amber-50":"border-red-500 bg-red-50":"border-slate-200 bg-slate-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold ${s.qc_score!==void 0?s.qc_score>=80?"text-green-600":s.qc_score>=60?"text-amber-600":"text-red-600":"text-slate-400"}`,children:s.qc_score!==void 0?s.qc_score:"-"}),e.jsx("div",{className:"text-xs text-slate-500",children:"/ 100"})]})})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide block mb-1",children:"QC Status"}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.qc_status==="Pass"||s.status==="QC Approved"?"bg-green-100 text-green-700":s.qc_status==="Fail"||s.status==="QC Rejected"?"bg-red-100 text-red-700":s.qc_status==="Rework"||s.status==="Rework Required"?"bg-amber-100 text-amber-700":s.status==="Pending QC Review"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:s.qc_status||(s.status==="QC Approved"?"Pass":s.status==="QC Rejected"?"Fail":s.status==="Rework Required"?"Rework":s.status==="Pending QC Review"?"Pending":"Not Reviewed")})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide block mb-1",children:"Reviewer"}),M()?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:M()?.name?.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:M()?.name})]}):e.jsx("span",{className:"text-sm text-slate-400",children:"-"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide block mb-1",children:"QC Date"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.qc_reviewed_at?new Date(s.qc_reviewed_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]})]}),s.rework_count!==void 0&&s.rework_count>0&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600",children:"âš ï¸"}),e.jsxs("span",{className:"text-sm text-amber-700",children:["This asset has been sent for rework ",e.jsx("strong",{children:s.rework_count})," time",s.rework_count>1?"s":""]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¤–"})," AI Scores (Pre-submission)"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("div",{className:`text-3xl font-bold ${s.seo_score!==void 0?s.seo_score>=80?"text-green-600":s.seo_score>=60?"text-amber-600":"text-red-600":"text-slate-400"}`,children:s.seo_score??"-"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"SEO Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsx("div",{className:`text-3xl font-bold ${s.grammar_score!==void 0?s.grammar_score>=80?"text-green-600":s.grammar_score>=60?"text-amber-600":"text-red-600":"text-slate-400"}`,children:s.grammar_score??"-"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Grammar Score"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-purple-50 px-4 py-3 border-b border-purple-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," QC Checklist & Scoring",i?.totalReviews&&i.totalReviews>0&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-purple-100 text-purple-600 rounded-full text-xs",children:[i.totalReviews," review",i.totalReviews>1?"s":""]})]})}),e.jsx("div",{className:"p-4",children:a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Loading QC review data..."})]}):i?.latestReview?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold text-indigo-800",children:"Admin QC Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl font-bold ${i.latestReview.qc_score>=80?"text-green-600":i.latestReview.qc_score>=60?"text-amber-600":"text-red-600"}`,children:i.latestReview.qc_score}),e.jsx("span",{className:"text-sm text-slate-500",children:"/ 100"})]})]}),e.jsxs("div",{className:"text-xs text-indigo-600",children:["Reviewed by: ",i.latestReview.reviewer_name||"Admin"," on"," ",new Date(i.latestReview.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),i.latestReview.checklist_items&&Object.keys(i.latestReview.checklist_items).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Compliance Checklist"}),Object.entries(i.latestReview.checklist_items).map(([t,l])=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${l?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${l?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:l?"âœ“":"âœ—"}),e.jsx("span",{className:"font-medium text-slate-900 text-sm",children:t})]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${l?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l?"Pass":"Fail"})]},t)),e.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Checklist Completion"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.latestReview.checklist_completion?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[Object.values(i.latestReview.checklist_items).filter(Boolean).length," / ",Object.keys(i.latestReview.checklist_items).length," items passed"]})]})})]}),e.jsx("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"QC Decision"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${i.latestReview.qc_decision==="approved"?"bg-green-100 text-green-700":i.latestReview.qc_decision==="rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:i.latestReview.qc_decision})]})}),i.latestReview.qc_remarks&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2",children:"Admin Remarks"}),e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:i.latestReview.qc_remarks})]})]}):s.qc_checklist_items&&s.qc_checklist_items.length>0?e.jsxs("div",{className:"space-y-3",children:[s.qc_checklist_items.map((t,l)=>e.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`px-4 py-3 flex items-center justify-between ${t.result==="Pass"?"bg-green-50":"bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${t.result==="Pass"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:t.result==="Pass"?"âœ“":"âœ—"}),e.jsx("span",{className:"font-medium text-slate-900",children:t.item_name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-sm font-bold ${t.result==="Pass"?"text-green-600":"text-red-600"}`,children:[t.score,"/",t.max_score]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.result==="Pass"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.result})]})]}),t.reviewer_comment&&e.jsxs("div",{className:"px-4 py-2 bg-white border-t border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Reviewer Comment"}),e.jsx("p",{className:"text-sm text-slate-700",children:t.reviewer_comment})]})]},t.id||l)),e.jsx("div",{className:"mt-4 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-900",children:"Total Checklist Score"}),e.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[s.qc_checklist_items.reduce((t,l)=>t+l.score,0),"/",s.qc_checklist_items.reduce((t,l)=>t+l.max_score,0)]})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[e.jsxs("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["QC Checklist Items (",s.application_type?.toUpperCase()||"WEB"," - Pending Review)"]}),e.jsx("div",{className:"space-y-2",children:(s.application_type==="seo"?["SEO Title Optimization","Meta Description Quality","Keyword Density Check","H1/H2 Structure","Internal/External Links","Content Readability"]:s.application_type==="smm"?["Platform Guidelines Compliance","Visual Quality & Dimensions","Caption & Hashtag Quality","Brand Voice Consistency","CTA Effectiveness","Engagement Potential"]:["Brand Compliance","Technical Specs Met","Content Quality","SEO Optimization","Legal / Regulatory Check","Tone of Voice"]).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold bg-slate-200 text-slate-500",children:"?"}),e.jsx("span",{className:"font-medium text-slate-700 text-sm",children:t})]}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-500",children:"Pending"})]},t))})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-xl",children:"â³"})}),e.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Awaiting QC Review"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s.status==="Draft"?"Submit this asset for QC review to get it evaluated":s.status==="Pending QC Review"?"This asset is in the review queue":"Checklist scores will appear after admin review"})]})]})})]}),i&&i.reviews.length>1&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“œ"})," QC Review History"]})}),e.jsx("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto",children:i.reviews.slice(1).map((t,l)=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.qc_decision==="approved"?"bg-green-100 text-green-700":t.qc_decision==="rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:t.qc_decision})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-slate-700",children:["Score: ",t.qc_score,"/100"]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["by ",t.reviewer_name||"Admin"]})]}),t.qc_remarks&&e.jsxs("p",{className:"text-xs text-slate-600 mt-2 italic",children:['"',t.qc_remarks,'"']})]},t.id||l))})]}),(s.qc_remarks||i?.assetQCInfo?.qc_remarks)&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¬"})," QC Remarks"]})}),e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:i?.assetQCInfo?.qc_remarks||s.qc_remarks})})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Submission Info"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Submitted By"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.submitted_by&&A.find(t=>t.id===s.submitted_by)?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Submitted At"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.submitted_at?new Date(s.submitted_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]})]})]})]}),c==="usage"&&e.jsx(ae,{asset:s})]})]})]})};export{ne as A};
