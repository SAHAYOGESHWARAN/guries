import{u as S,r as l,j as e,g as C}from"./index.Cgn8UqAd.js";import{T as W}from"./Table.qlFSYBMu.js";import{M as A}from"./Modal.Dm3XWcYn.js";import{e as E}from"./csvHelper.D2kXyc6K.js";import"./index.Cjd9_PBs.js";const L=["All Workflows","Content Production","SEO Campaign","Social Media"],T=()=>{const{data:g,create:x,update:u,remove:b}=S("workflowStages"),[o,h]=l.useState(""),[d,f]=l.useState("All Workflows"),[p,r]=l.useState(!1),[n,c]=l.useState(null),[t,s]=l.useState({workflow_name:"",stage_order:1,total_stages:1,stage_label:"",color_tag:"blue",active_flag:"Active"}),m=g.filter(a=>{const i=a.workflow_name.toLowerCase().includes(o.toLowerCase())||a.stage_label.toLowerCase().includes(o.toLowerCase()),y=d==="All Workflows"||a.workflow_name===d;return i&&y}),w=a=>{const i={blue:"bg-blue-500",amber:"bg-amber-500",green:"bg-green-500",purple:"bg-purple-500",slate:"bg-slate-500",red:"bg-red-500"};return e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${i[a.toLowerCase()]||"bg-gray-500"} mr-2 shadow-sm`}),e.jsx("span",{className:"text-sm capitalize text-slate-600",children:a})]})},v=a=>{c(a),s(a),r(!0)},j=async a=>{confirm("Delete this stage?")&&await b(a)},k=async()=>{n?await u(n.id,t):await x(t),r(!1),c(null),s({workflow_name:"",stage_order:1,total_stages:1,stage_label:"",color_tag:"blue",active_flag:"Active"})},N=()=>{E(m,"workflow_stage_master_export")},_=[{header:"Workflow Name",accessor:"workflow_name",className:"font-bold text-slate-800"},{header:"Stage Order",accessor:a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-mono font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded text-xs mr-1",children:a.stage_order}),e.jsxs("span",{className:"text-xs text-slate-400",children:["of ",a.total_stages]})]})},{header:"Stage Label",accessor:"stage_label",className:"font-medium"},{header:"Color Tag",accessor:a=>w(a.color_tag)},{header:"Active Flag",accessor:a=>C(a.active_flag)},{header:"Actions",accessor:a=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(a),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>j(a.id),className:"text-red-600 hover:text-red-800",children:"Del"})]})}];return e.jsxs("div",{className:"space-y-6 h-full overflow-y-auto w-full pr-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Workflow Stage Master"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:N,className:"bg-white text-slate-600 border border-slate-300 px-4 py-2 rounded-lg font-medium text-sm hover:bg-slate-50 shadow-sm transition-colors",children:"Export"}),e.jsx("button",{onClick:()=>{c(null),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium text-sm hover:bg-blue-700 shadow-sm",children:"Add Workflow Stage"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("input",{type:"search",className:"block w-full p-2.5 border border-gray-300 rounded-lg",placeholder:"Search workflows...",value:o,onChange:a=>h(a.target.value)}),e.jsx("select",{value:d,onChange:a=>f(a.target.value),className:"bg-slate-50 border border-slate-300 text-sm rounded-lg p-2.5",children:L.map(a=>e.jsx("option",{value:a,children:a},a))})]})}),e.jsx(W,{columns:_,data:m,title:"Workflow Stage Registry"}),e.jsx(A,{isOpen:p,onClose:()=>r(!1),title:n?"Edit Stage":"Add Stage",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Workflow Name"}),e.jsx("input",{type:"text",value:t.workflow_name,onChange:a=>s({...t,workflow_name:a.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stage Order"}),e.jsx("input",{type:"number",value:t.stage_order,onChange:a=>s({...t,stage_order:parseInt(a.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Stages"}),e.jsx("input",{type:"number",value:t.total_stages,onChange:a=>s({...t,total_stages:parseInt(a.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Label"}),e.jsx("input",{type:"text",value:t.stage_label,onChange:a=>s({...t,stage_label:a.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Color"}),e.jsxs("select",{value:t.color_tag,onChange:a=>s({...t,color_tag:a.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"amber",children:"Amber"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"slate",children:"Slate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:t.active_flag,onChange:a=>s({...t,active_flag:a.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Save"})})]})})]})};export{T as default};
