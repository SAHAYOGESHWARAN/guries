import{e as X,u as m,r as o,j as t}from"./index.Cgn8UqAd.js";const y=[{key:"select",label:"",width:"40px",sortable:!1},{key:"name",label:"Task",width:"auto",sortable:!0},{key:"id",label:"ID",width:"60px",sortable:!0},{key:"asset_type",label:"Type",width:"80px",sortable:!0},{key:"workflow_stage",label:"Section",width:"100px",sortable:!0},{key:"linked_project_id",label:"Projects",width:"120px",sortable:!0},{key:"qc_status",label:"Tags",width:"80px",sortable:!0},{key:"created_at",label:"Start",width:"100px",sortable:!0},{key:"updated_at",label:"Due",width:"100px",sortable:!0},{key:"status",label:"Custom Fields",width:"120px",sortable:!0},{key:"created_by",label:"Assigned",width:"80px",sortable:!0},{key:"actions",label:"",width:"60px",sortable:!1}],Z=({onNavigate:j})=>{X();const L="/api/v1",{data:R=[]}=m("users");m("services"),m("tasks"),m("campaigns");const{data:T=[]}=m("projects"),[U,q]=o.useState([]),[B,A]=o.useState(!0),[f,O]=o.useState(""),[h,V]=o.useState(15),[d,i]=o.useState(1),[u,$]=o.useState("created_at"),[w,P]=o.useState("desc"),[k,N]=o.useState([]),[a,F]=o.useState(y.map(e=>e.key)),[E,M]=o.useState(!1),v=o.useRef(null);o.useEffect(()=>{(async()=>{A(!0);try{const s=await fetch(`${L}/seo-assets`);if(s.ok){const r=await s.json();q(r)}}catch{}finally{A(!1)}})()},[L]),o.useEffect(()=>{const e=s=>{v.current&&!v.current.contains(s.target)&&M(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const _=e=>e&&R.find(r=>r.id===e)?.name||"-",C=e=>e&&T.find(r=>r.id===e)?.project_name||"-",p=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"-",c=U.filter(e=>{if(!f)return!0;const s=f.toLowerCase();return e.name?.toLowerCase().includes(s)||e.seo_title?.toLowerCase().includes(s)||e.asset_type?.toLowerCase().includes(s)||String(e.id).includes(s)}).sort((e,s)=>{let r=e[u],l=s[u];return(u==="created_at"||u==="updated_at")&&(r=r?new Date(r).getTime():0,l=l?new Date(l).getTime():0),w==="asc"?r>l?1:-1:r<l?1:-1}),x=Math.ceil(c.length/h),g=(d-1)*h,b=c.slice(g,g+h),Q=e=>{u===e?P(w==="asc"?"desc":"asc"):($(e),P("asc"))},W=e=>{N(s=>s.includes(e)?s.filter(r=>r!==e):[...s,e])},z=()=>{k.length===b.length?N([]):N(b.map(e=>e.id))},H=()=>{const e=y.filter(l=>a.includes(l.key)&&l.key!=="select"&&l.key!=="actions").map(l=>l.label),s=c.map(l=>[l.name||l.seo_title||"-",l.id,l.asset_type||"-",l.workflow_stage||"-",C(l.linked_project_id),l.qc_status||"-",p(l.created_at),p(l.updated_at),l.status||"-",_(l.created_by)]),r=[e.join("	"),...s.map(l=>l.join("	"))].join(`
`);navigator.clipboard.writeText(r),alert("Copied to clipboard!")},D=()=>{const e=["Task","ID","Type","Section","Projects","Tags","Start","Due","Custom Fields","Assigned"],s=c.map(n=>[`"${n.name||n.seo_title||"-"}"`,n.id,n.asset_type||"-",n.workflow_stage||"-",C(n.linked_project_id),n.qc_status||"-",p(n.created_at),p(n.updated_at),n.status||"-",_(n.created_by)]),r=[e.join(","),...s.map(n=>n.join(","))].join(`
`),l=new Blob([r],{type:"text/csv"}),K=URL.createObjectURL(l),S=document.createElement("a");S.href=K,S.download="seo-assets.csv",S.click()},I=()=>{window.print()},G=e=>{F(s=>s.includes(e)?s.filter(r=>r!==e):[...s,e])},J=e=>({Pass:"bg-green-100 text-green-700",Approved:"bg-green-100 text-green-700","QC Pending":"bg-yellow-100 text-yellow-700",Pending:"bg-yellow-100 text-yellow-700",Fail:"bg-red-100 text-red-700",Rejected:"bg-red-100 text-red-700",Rework:"bg-orange-100 text-orange-700"})[e]||"bg-slate-100 text-slate-600";return t.jsxs("div",{className:"h-full flex flex-col bg-white w-full",children:[t.jsxs("div",{className:"flex-shrink-0 border-b border-slate-200 px-4 py-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"SEO Assets"}),t.jsxs("button",{onClick:()=>j?.("seo-asset-upload"),className:"px-3 py-1.5 bg-blue-600 text-white rounded text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New"]})]}),t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[t.jsx("span",{children:"Show"}),t.jsxs("select",{value:h,onChange:e=>{V(Number(e.target.value)),i(1)},className:"border border-slate-300 rounded px-2 py-1 text-xs",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:15,children:"15"}),t.jsx("option",{value:25,children:"25"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]}),t.jsx("span",{children:"entries"}),t.jsx("span",{className:"text-slate-400 mx-2",children:"|"}),t.jsxs("span",{children:[c.length," total"]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"text",value:f,onChange:e=>{O(e.target.value),i(1)},placeholder:"Search...",className:"border border-slate-300 rounded px-2 py-1 text-xs w-40 focus:outline-none focus:ring-1 focus:ring-blue-500"})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:H,className:"px-2 py-1 border border-slate-300 rounded text-xs text-slate-600 hover:bg-slate-50",children:"Copy"}),t.jsx("button",{onClick:D,className:"px-2 py-1 border border-slate-300 rounded text-xs text-slate-600 hover:bg-slate-50",children:"CSV"}),t.jsx("button",{onClick:D,className:"px-2 py-1 border border-slate-300 rounded text-xs text-slate-600 hover:bg-slate-50",children:"Excel"}),t.jsx("button",{onClick:I,className:"px-2 py-1 border border-slate-300 rounded text-xs text-slate-600 hover:bg-slate-50",children:"Print"}),t.jsxs("div",{className:"relative",ref:v,children:[t.jsxs("button",{onClick:()=>M(!E),className:"px-2 py-1 border border-slate-300 rounded text-xs text-slate-600 hover:bg-slate-50 flex items-center gap-1",children:["Columns",t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&t.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-slate-200 rounded shadow-lg z-20 py-1 min-w-[150px]",children:y.filter(e=>e.key!=="select"&&e.key!=="actions").map(e=>t.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs",children:[t.jsx("input",{type:"checkbox",checked:a.includes(e.key),onChange:()=>G(e.key),className:"rounded"}),e.label]},e.key))})]})]})]})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:B?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):t.jsxs("table",{className:"w-full text-xs border-collapse",children:[t.jsx("thead",{className:"bg-slate-100 border-b border-slate-200 sticky top-0",children:t.jsxs("tr",{children:[a.includes("select")&&t.jsx("th",{className:"px-2 py-2 text-left w-8 border-r border-slate-200",children:t.jsx("input",{type:"checkbox",checked:k.length===b.length&&b.length>0,onChange:z,className:"rounded w-3 h-3"})}),y.filter(e=>a.includes(e.key)&&e.key!=="select").map(e=>t.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer hover:bg-slate-200 border-r border-slate-200 whitespace-nowrap",onClick:()=>e.sortable&&Q(e.key),children:t.jsxs("div",{className:"flex items-center gap-1",children:[e.label,e.sortable&&t.jsx("span",{className:"text-slate-400 text-[10px]",children:u===e.key?w==="asc"?"▲":"▼":"⇅"})]})},e.key))]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:b.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:a.length,className:"px-2 py-8 text-center text-slate-500",children:"No SEO assets found"})}):b.map((e,s)=>t.jsxs("tr",{className:`hover:bg-blue-50 ${s%2===0?"bg-white":"bg-slate-50/50"}`,children:[a.includes("select")&&t.jsx("td",{className:"px-2 py-1.5 border-r border-slate-100",children:t.jsx("input",{type:"checkbox",checked:k.includes(e.id),onChange:()=>W(e.id),className:"rounded w-3 h-3"})}),a.includes("name")&&t.jsx("td",{className:"px-2 py-1.5 border-r border-slate-100",children:t.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),j?.("seo-asset-edit",e.id)},className:"text-blue-600 hover:underline font-medium truncate block max-w-[200px]",title:e.name||e.seo_title||"Untitled",children:e.name||e.seo_title||"Untitled"})}),a.includes("id")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100",children:e.id}),a.includes("asset_type")&&t.jsx("td",{className:"px-2 py-1.5 border-r border-slate-100",children:e.asset_type&&t.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded bg-slate-100 text-slate-700 text-[10px]",children:e.asset_type})}),a.includes("workflow_stage")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100",children:e.workflow_stage||"-"}),a.includes("linked_project_id")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100",children:C(e.linked_project_id)}),a.includes("qc_status")&&t.jsx("td",{className:"px-2 py-1.5 border-r border-slate-100",children:e.qc_status&&t.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${J(e.qc_status)}`,children:e.qc_status})}),a.includes("created_at")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100 whitespace-nowrap",children:p(e.created_at)}),a.includes("updated_at")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100 whitespace-nowrap",children:p(e.updated_at)}),a.includes("status")&&t.jsx("td",{className:"px-2 py-1.5 text-slate-600 border-r border-slate-100",children:e.status||"-"}),a.includes("created_by")&&t.jsx("td",{className:"px-2 py-1.5 border-r border-slate-100",children:t.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-slate-200 text-slate-600 text-[10px] font-medium",children:_(e.created_by)?.charAt(0)||"?"})}),a.includes("actions")&&t.jsx("td",{className:"px-2 py-1.5",children:t.jsx("button",{onClick:()=>j?.("seo-asset-edit",e.id),className:"p-1 text-slate-400 hover:text-blue-600",title:"Edit",children:t.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]},e.id))})]})}),x>1&&t.jsxs("div",{className:"flex-shrink-0 border-t border-slate-200 px-4 py-2 flex items-center justify-between bg-slate-50",children:[t.jsxs("div",{className:"text-xs text-slate-600",children:["Showing ",g+1,"-",Math.min(g+h,c.length)," of ",c.length]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>i(1),disabled:d===1,className:"px-2 py-1 border border-slate-300 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white",children:"First"}),t.jsx("button",{onClick:()=>i(e=>Math.max(1,e-1)),disabled:d===1,className:"px-2 py-1 border border-slate-300 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white",children:"Prev"}),Array.from({length:Math.min(5,x)},(e,s)=>{const r=d<=3?s+1:d+s-2;return r>x||r<1?null:t.jsx("button",{onClick:()=>i(r),className:`px-2 py-1 border rounded text-xs ${d===r?"bg-blue-600 text-white border-blue-600":"border-slate-300 hover:bg-white"}`,children:r},r)}),t.jsx("button",{onClick:()=>i(e=>Math.min(x,e+1)),disabled:d===x,className:"px-2 py-1 border border-slate-300 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white",children:"Next"}),t.jsx("button",{onClick:()=>i(x),disabled:d===x,className:"px-2 py-1 border border-slate-300 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white",children:"Last"})]})]})]})};export{Z as default};
